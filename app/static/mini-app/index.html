<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#2481cc">
    <title>Mini App</title>
    
    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/mini-app/css/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="spinner"></div>
        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
    </div>

    <!-- Welcome Screen (shown on first visit) -->
    <div id="welcome-screen" class="welcome-screen" style="display: none;">
        <div class="welcome-content">
            <div class="welcome-icon">üëã</div>
            <h1 id="welcome-title">–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ!</h1>
            <div id="welcome-message" class="welcome-message"></div>
            <button id="welcome-close-btn" class="welcome-btn">–ü–æ—á–∞—Ç–∏</button>
        </div>
    </div>

    <!-- Main App (hidden until ready) -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <h1 id="bot-name">Mini App</h1>
            <button id="close-btn" class="close-btn" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">√ó</button>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab active" data-tab="partners">
                <span class="tab-icon tab-icon-partners" aria-hidden="true"></span>
                <span class="tab-label">–ü–∞—Ä—Ç–Ω–µ—Ä–∏</span>
            </button>
            <button class="tab" data-tab="top">
                <span class="tab-icon tab-icon-top" aria-hidden="true"></span>
                <span class="tab-label">TOP</span>
            </button>
            <button class="tab" data-tab="earnings">
                <span class="tab-icon tab-icon-earnings" aria-hidden="true"></span>
                <span class="tab-label">–ó–∞—Ä–æ–±—ñ—Ç–∫–∏</span>
            </button>
            <button class="tab" data-tab="wallet">
                <span class="tab-icon tab-icon-wallet" aria-hidden="true"></span>
                <span class="tab-label">–ì–∞–º–∞–Ω–µ—Ü—å</span>
            </button>
            <button class="tab" data-tab="info">
                <span class="tab-icon tab-icon-info" aria-hidden="true"></span>
                <span class="tab-label">–Ü–Ω—Ñ–æ</span>
            </button>
        </nav>

        <!-- Pull-to-refresh indicator -->
        <div id="pull-to-refresh" class="pull-to-refresh">
            <div class="pull-to-refresh-icon">‚¨áÔ∏è</div>
            <div class="pull-to-refresh-text">–ü–æ—Ç—è–≥–Ω—ñ—Ç—å –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è</div>
        </div>

        <!-- Content Areas -->
        <main class="content">
            <!-- Partners Page -->
            <section id="partners-page" class="page active">
                <!-- Search & Filters -->
                <div class="page-header">
                    <div class="search-box">
                        <input type="text" id="partner-search" class="search-input" placeholder="üîç –ü–æ—à—É–∫ –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤...">
                        <button class="filter-btn" id="filter-btn" aria-label="–§—ñ–ª—å—Ç—Ä–∏">‚öôÔ∏è</button>
                    </div>
                    <div class="filter-panel" id="filter-panel" style="display: none;">
                        <div class="filter-group">
                            <label>–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:</label>
                            <select id="sort-select" class="filter-select">
                                <option value="name">–ó–∞ –Ω–∞–∑–≤–æ—é</option>
                                <option value="commission">–ó–∞ –∫–æ–º—ñ—Å—ñ—î—é</option>
                                <option value="new">–°–ø–æ—á–∞—Ç–∫—É –Ω–æ–≤—ñ</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                            <div class="filter-chips">
                                <button class="chip active" data-filter="all">–í—Å—ñ</button>
                                <button class="chip" data-filter="new">NEW</button>
                                <button class="chip" data-filter="top">TOP</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Partners Grid -->
                <div class="partners-grid" id="partners-list">
                    <!-- Partners will be loaded here -->
                </div>
                
                <!-- Loading Skeleton -->
                <div id="partners-skeleton" class="skeleton-grid" style="display: none;">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </section>

            <!-- TOP Page -->
            <section id="top-page" class="page">
                <div id="top-content">
                    <!-- TOP partners or locked message -->
                </div>
            </section>

            <!-- Earnings Page -->
            <section id="earnings-page" class="page">
                <div class="earnings-dashboard" id="earnings-dashboard">
                    <!-- Earnings data will be loaded here -->
                </div>
            </section>

            <!-- Wallet Page -->
            <section id="wallet-page" class="page">
                <div class="wallet-section" id="wallet-section">
                    <!-- Wallet form will be loaded here -->
                </div>
            </section>

            <!-- Info Page -->
            <section id="info-page" class="page">
                <div class="info-section" id="info-section">
                    <!-- Info content will be loaded here -->
                </div>
            </section>

            <!-- Partner Detail Page (hidden by default) -->
            <section id="partner-detail-page" class="page">
                <div class="detail-header">
                    <button class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</button>
                    <h2 id="partner-detail-name"></h2>
                </div>
                <div class="partner-detail-content" id="partner-detail-content">
                    <!-- Partner details will be loaded here -->
                </div>
            </section>
        </main>
    </div>

    <!-- Error Message (hidden by default) -->
    <div id="error-message" class="error-message" style="display: none;">
        <p id="error-text"></p>
        <button id="retry-btn" class="retry-btn">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
    </div>

    <!-- Scripts -->
    <script src="/static/mini-app/js/api.js"></script>
    <script src="/static/mini-app/js/app.js"></script>
</body>
</html>

