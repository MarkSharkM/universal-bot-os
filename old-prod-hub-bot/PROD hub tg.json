{
  "name": "PROD hub+mcp",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "id": "e05009a6-b74a-4895-89d0-fca4c0ad6edd",
      "name": "Global data",
      "type": "n8n-nodes-base.set",
      "position": [
        -6176,
        -1504
      ],
      "typeVersion": 3.4
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "a2025331-2c2b-4df8-9e23-37035a5c808a",
              "operator": {
                "type": "string",
                "operation": "startsWith"
              },
              "leftValue": "={{ $('Trigger').item.json.message.text }}\n",
              "rightValue": "/"
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "3a78395e-b55b-499b-a913-42c387039e89",
      "name": "Command?",
      "type": "n8n-nodes-base.if",
      "position": [
        -3760,
        -1872
      ],
      "typeVersion": 2
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 1,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "360a2e5b-8736-488c-87dc-b5fcbd2b5102",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "leftValue": "={{ $('Trigger').item.json.message && (!$('Trigger').item.json.message.successful_payment) }}",
                    "rightValue": "/"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Message"
            },
            {
              "conditions": {
                "options": {
                  "version": 1,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "727fdd8d-ed98-4d64-b720-a10d78d73025",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "leftValue": "={{ $('Trigger').item.json.hasOwnProperty('callback_query') }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Callback"
            },
            {
              "conditions": {
                "options": {
                  "version": 1,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "e014a230-519a-4028-98b3-33c10d408c85",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "leftValue": "={{ $('Trigger').item.json.hasOwnProperty('my_chat_member') }}",
                    "rightValue": "System"
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "System"
            },
            {
              "conditions": {
                "options": {
                  "version": 1,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "b03aaa37-d57f-437c-acb2-de2068d3241a",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "leftValue": "={{ $('Trigger').item.json.hasOwnProperty('pre_checkout_query') || $('Trigger').item.json.message.hasOwnProperty('successful_payment') }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Payment"
            }
          ]
        },
        "options": {}
      },
      "id": "3699d6f1-0df8-417e-94e9-4340f7c6d4dc",
      "name": "Switch",
      "type": "n8n-nodes-base.switch",
      "position": [
        -4592,
        -1616
      ],
      "typeVersion": 3
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "0ae3453e-dbda-4884-b8cb-58cff18c442b",
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?wallet\\b",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "wallet"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "360a2e5b-8736-488c-87dc-b5fcbd2b5102",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    },
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?top\\b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "top"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "546c81bf-2ee0-46b2-847b-1f92b84efaf3",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    },
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?partners\\b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "partners"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "c0066ccb-61bb-4a89-b841-c4f7c4b1239b",
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?share\\b",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "share"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "abe720f7-c1a7-4a38-9c31-fe65a42c970e",
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?earnings\\b",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "earnings"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "d3c49935-e6e3-456e-b22d-cecf37038041",
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "^\\/(?:start\\s+)?info\\b",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "info"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 1
                },
                "conditions": [
                  {
                    "id": "7dcf593b-b9c5-43ea-b9a2-65f1cdce3b03",
                    "leftValue": "={{ $('Trigger').item.json.message.text }}",
                    "rightValue": "/start",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "start"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "id": "bd597a08-a2fe-4f4f-be62-d3efc19bda30",
      "name": "Switch_Commands",
      "type": "n8n-nodes-base.switch",
      "position": [
        -3248,
        -1824
      ],
      "typeVersion": 3
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1841956048,
          "mode": "list",
          "cachedResultName": "Partners_Settings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1841956048"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Category",
              "lookupValue": "=TOP"
            },
            {
              "lookupColumn": "Active",
              "lookupValue": "=Yes"
            },
            {
              "lookupColumn": "Verified",
              "lookupValue": "=Yes"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2688,
        -2032
      ],
      "id": "243d2db4-7c25-4ded-999e-bf895a9daf3a",
      "name": "/top",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "/**\n * Format_TopBots_Message ‚Äî MULTILANG via $node[...] (FIXED + buy_top_price, _tgr_ support)\n */\n\nconst TOP_NODE  = '/top';\nconst USER_NODE = 'read_user_wallet_for_top';\nconst REQUIRED_INVITES = 5;\n\n// --- helper: –±–µ–∑–ø–µ—á–Ω–µ —á–∏—Ç–∞–Ω–Ω—è $node[\"Name\"].json ---\nfunction getNodeJson(name) {\n  try {\n    const node = $node[name];\n    if (!node) return {};\n    const j = node.json;\n    if (Array.isArray(j)) {\n      return j[0] || {};\n    }\n    return j || {};\n  } catch (e) {\n    return {};\n  }\n}\n\n// --- 0) –î–∞–Ω—ñ –∑ —ñ–Ω—à–∏—Ö –Ω–æ–¥ ---\nconst topRows  = $items(TOP_NODE)  || [];\n\n// —Ç—É—Ç –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ñ—ñ–∫—Å: –±–µ–∑–ø–µ—á–Ω–µ —á–∏—Ç–∞–Ω–Ω—è USER_NODE\nlet userRows = [];\ntry {\n  userRows = $items(USER_NODE) || [];\n} catch (e) {\n  userRows = [];\n}\nconst userData = userRows[0]?.json || {};\n\n// Output Translator\nconst trItem   = getNodeJson('Translator');\n\n// Global data (—è–∫—â–æ —Ç–∞–º —â–æ—Å—å —î –ø–æ –º–æ–≤—ñ)\nconst globalItem = getNodeJson('Global data');\n\n// Trigger (update –∑ Telegram)\nconst trigItem = getNodeJson('Trigger');\n\n// --- 0.1) –ö–∞–Ω–¥–∏–¥–∞—Ç–∏ –º–æ–≤ –∑ —Ä—ñ–∑–Ω–∏—Ö –¥–∂–µ—Ä–µ–ª ---\nconst translatorLang =\n  trItem.userLang ||\n  trItem.detectedLang ||\n  trItem.language ||\n  trItem.lang ||\n  '';\n\n// –º–æ–≤–∞ –∑ Telegram update\nconst trigLang =\n  (trigItem.message && trigItem.message.from && trigItem.message.from.language_code) ||\n  (trigItem.callback_query && trigItem.callback_query.from && trigItem.callback_query.from.language_code) ||\n  (trigItem.from && trigItem.from.language_code) ||\n  '';\n\nconst globalLang =\n  globalItem.userLang ||\n  globalItem.detectedLang ||\n  globalItem.language ||\n  globalItem.lang ||\n  '';\n\nlet rawLangCode = translatorLang || trigLang || globalLang || 'en';\nrawLangCode = String(rawLangCode || 'en').trim();\n\nconst baseLang  = rawLangCode.split('-')[0].toLowerCase();\nconst supported = ['uk', 'en', 'ru', 'de', 'es'];\nconst lang      = supported.includes(baseLang) ? baseLang : 'en';\n\n// üî• —Ü—ñ–Ω–∞ –∑ Translator (buy_top_price)\nconst translations  = trItem?.translations || {};\nconst BUY_TOP_PRICE = Number(translations.buy_top_price || 1);\n\n// --- 0.2) –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç—ñ–≤ ---\nconst shareTextByLang = {\n  uk:'üéâ –î–æ–ª—É—á–∞–π—Å—è –¥–æ HubAggregator ‚Äî –æ—Ç—Ä–∏–º—É–π –∑—ñ—Ä–∫–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å!',\n  en:'üéâ Join HubAggregator ‚Äî earn Stars for your activity!',\n  ru:'üéâ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ HubAggregator ‚Äî –ø–æ–ª—É—á–∞–π –∑–≤—ë–∑–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!',\n  de:'üéâ Mach mit bei HubAggregator ‚Äì sammle Stars f√ºr deine Aktivit√§t!',\n  es:'üéâ √önete a HubAggregator: gana Stars por tu actividad!',\n};\n\nconst shareLabelByLang = {\n  uk:'üß° –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å HubAggregator',\n  en:'üß° Share HubAggregator',\n  ru:'üß° –ü–æ–¥–µ–ª–∏—Ç—å—Å—è HubAggregator',\n  de:'üß° HubAggregator teilen',\n  es:'üß° Compartir HubAggregator',\n};\n\nconst unlockLabelByLang = {\n  uk:'üí´ –í—ñ–¥–∫—Ä–∏—Ç–∏ TOP',\n  en:'üí´ Unlock TOP',\n  ru:'üí´ –û—Ç–∫—Ä—ã—Ç—å TOP',\n  de:'üí´ TOP freischalten',\n  es:'üí´ Desbloquear TOP',\n};\n\nconst lockedMsgByLang = {\n  uk:(l)=>`üéØ –¢–û–ü –±–æ—Ç–∏ –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä—à–∏—Ö <b>${REQUIRED_INVITES} –∑–∞–ø—Ä–æ—à–µ–Ω—å</b>.\n\nüí¨ –¢–æ–±—ñ –∑–∞–ª–∏—à–∏–ª–æ—Å—å –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ —â–µ <b>${l}</b> –¥—Ä—É–∑—ñ–≤, —â–æ–± —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∫–∏!\n\nüí´ –¢–∞–∫–æ–∂ —Ç–∏ –º–æ–∂–µ—à –≤—ñ–¥–∫—Ä–∏—Ç–∏ TOP –º–∏—Ç—Ç—î–≤–æ –∑–∞ <b>${BUY_TOP_PRICE}‚≠ê</b>.\n\nüëá –ù–∞—Ç–∏—Å–Ω–∏, —â–æ–± –ø–æ–¥—ñ–ª–∏—Ç–∏—Å—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º:`.trim(),\n\n  en:(l)=>`üéØ TOP bots unlock after your first <b>${REQUIRED_INVITES} invites</b>.\n\nüí¨ You still need to invite <b>${l}</b> friends to unlock the most profitable partners!\n\nüí´ You can also unlock TOP instantly for <b>${BUY_TOP_PRICE}‚≠ê</b>.\n\nüëá Tap to share your link:`.trim(),\n\n  ru:(l)=>`üéØ –¢–û–ü-–±–æ—Ç—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö <b>${REQUIRED_INVITES} –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π</b>.\n\nüí¨ –¢–µ–±–µ –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –µ—â—ë <b>${l}</b> –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–º—ã–µ –≤—ã–≥–æ–¥–Ω—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∫–∏!\n\nüí´ –¢–∞–∫–∂–µ —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–∫—Ä—ã—Ç—å TOP –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∑–∞ <b>${BUY_TOP_PRICE}‚≠ê</b>.\n\nüëá –ù–∞–∂–º–∏, —á—Ç–æ–±—ã –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π:`.trim(),\n\n  de:(l)=>`üéØ TOP-Bots werden nach deinen ersten <b>${REQUIRED_INVITES} Einladungen</b> freigeschaltet.\n\nüí¨ Du musst noch <b>${l}</b> Freunde einladen, um die profitabelsten Partner zu √∂ffnen!\n\nüí´ Du kannst TOP auch sofort f√ºr <b>${BUY_TOP_PRICE}‚≠ê</b> freischalten.\n\nüëá Tippe, um deinen Link zu teilen:`.trim(),\n\n  es:(l)=>`üéØ Los bots TOP se desbloquean despu√©s de tus primeros <b>${REQUIRED_INVITES} invitados</b>.\n\nüí¨ Todav√≠a necesitas invitar a <b>${l}</b> amigos para desbloquear los partners m√°s rentables.\n\nüí´ Tambi√©n puedes desbloquear TOP al instante por <b>${BUY_TOP_PRICE}‚≠ê</b>.\n\nüëá Toca para compartir tu enlace:`.trim(),\n};\n\nconst topIntroByLang = {\n  uk:'üî• –¢–û–ü –ø–∞—Ä—Ç–Ω–µ—Ä–∏ –∑ –Ω–∞–π–∫—Ä–∞—â–∏–º –ø–æ—Ç–µ–Ω—Ü—ñ–∞–ª–æ–º –∑–∞—Ä–æ–±—ñ—Ç–∫—É:',\n  en:'üî• TOP partners with the best earning potential:',\n  ru:'üî• –¢–û–ü –ø–∞—Ä—Ç–Ω—ë—Ä—ã —Å –ª—É—á—à–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º –∑–∞—Ä–∞–±–æ—Ç–∫–∞:',\n  de:'üî• TOP-Partner mit dem besten Verdienstpotenzial:',\n  es:'üî• Partners TOP con el mejor potencial de ganancias:',\n};\n\nconst bonusLabelByLang = {\n  uk:'–ë–æ–Ω—É—Å–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞',\n  en:'Bonus program',\n  ru:'–ë–æ–Ω—É—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞',\n  de:'Bonusprogramm',\n  es:'Programa de bonificaci√≥n',\n};\n\nconst openLabelByLang = {\n  uk:'–í—ñ–¥–∫—Ä–∏—Ç–∏',\n  en:'Open',\n  ru:'–û—Ç–∫—Ä—ã—Ç—å',\n  de:'√ñffnen',\n  es:'Abrir',\n};\n\nconst errorFetchByLang = {\n  uk:'‚ö†Ô∏è –ù–µ –≤–¥–∞–ª–æ—Å—è –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –±–æ—Ç—ñ–≤. –°–ø—Ä–æ–±—É–π –ø—ñ–∑–Ω—ñ—à–µ.',\n  en:'‚ö†Ô∏è Failed to get the bots list. Please try again later.',\n  ru:'‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ.',\n  de:'‚ö†Ô∏è Die Bot-Liste konnte nicht geladen werden. Bitte versuche es sp√§ter erneut.',\n  es:'‚ö†Ô∏è No se pudo obtener la lista de bots. Int√©ntalo de nuevo m√°s tarde.',\n};\n\nconst errorEmptyTopByLang = {\n  uk:'‚ö†Ô∏è –ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –±–æ—Ç—ñ–≤ —É –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó TOP.',\n  en:'‚ö†Ô∏è There are no available bots in the TOP category.',\n  ru:'‚ö†Ô∏è –ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–æ—Ç–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ TOP.',\n  de:'‚ö†Ô∏è Es sind keine Bots in der Kategorie TOP verf√ºgbar.',\n  es:'‚ö†Ô∏è No hay bots disponibles en la categor√≠a TOP.',\n};\n\nconst emptyAfterTrimByLang = {\n  uk:'‚ö†Ô∏è –°–ø–∏—Å–æ–∫ –¢–û–ü –ø–æ—Ä–æ–∂–Ω—ñ–π.',\n  en:'‚ö†Ô∏è The TOP list is empty.',\n  ru:'‚ö†Ô∏è –°–ø–∏—Å–æ–∫ –¢–û–ü –ø—É—Å—Ç.',\n  de:'‚ö†Ô∏è Die TOP-Liste ist leer.',\n  es:'‚ö†Ô∏è La lista TOP est√° vac√≠a.',\n};\n\n// fallback-–∏\nconst shareText   = shareTextByLang[lang]   || shareTextByLang.en;\nconst shareLabel  = shareLabelByLang[lang]  || shareLabelByLang.en;\nconst unlockLabel = unlockLabelByLang[lang] || unlockLabelByLang.en;\nconst topIntro    = topIntroByLang[lang]    || topIntroByLang.en;\nconst bonusLabel  = bonusLabelByLang[lang]  || bonusLabelByLang.en;\nconst openLabel   = openLabelByLang[lang]   || openLabelByLang.en;\n\n// --- helper: description (Description_xx) ---\nfunction getDescription(row, lc) {\n  const base = row['Description'] || '';\n  const key  = `Description_${lc}`;\n  return row[key] || base;\n}\n\n// --- share url ---\nconst buildHubShare = (tag) => {\n  const deep = `https://t.me/HubAggregatorBot?start=${encodeURIComponent(tag || 'share')}`;\n  return `https://t.me/share/url?url=${encodeURIComponent(deep)}&text=${encodeURIComponent(shareText)}`;\n};\n\n// --- –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏—Ö –ª—ñ–Ω–∫—ñ–≤ ---\nconst personalizeReferral = (link, tag) => {\n  if (!link) return '';\n  let out = String(link);\n\n  // —è–∫—â–æ –≤–∂–µ —î start=tgr_ –∞–±–æ start=_tgr_ ‚Äî –ª–∏—à–∞—î–º–æ —è–∫ —î\n  if (/(\\?|&)start=(?:_?tgr_)/i.test(out)) return out;\n\n  if (tag) {\n    out = out\n      .replace('{TGR}', tag)\n      .replace('_tgr_', tag)\n      .replace(/(\\?|\\&)(start|payload)=share\\b/i, `$1$2=${encodeURIComponent(tag)}`);\n  }\n  if (!/(\\?|&)start=/i.test(out) && tag) {\n    out += (out.includes('?') ? '&' : '?') + `start=${encodeURIComponent(tag)}`;\n  }\n  return out;\n};\n\n// --- 1) –î–∞–Ω—ñ –¥–ª—è TOP/—é–∑–µ—Ä–∞ ---\nconst totalInvited       = parseInt(userData['Total Invited'] ?? 0, 10) || 0;\nconst topStatusFromDB    = (userData['TOP Status'] || '').toLowerCase();\nconst isTopUnlockedByPurchase = topStatusFromDB === 'open';\n\n// –û—Å–Ω–æ–≤–Ω–∏–π userId –∑ —Ç–∞–±–ª–∏—Ü—ñ; —è–∫—â–æ –Ω–µ–º–∞—î ‚Äî –±–µ—Ä–µ–º–æ –∑ Trigger\nlet userId  = String(userData['User Chat ID'] ?? '').trim();\nif (!userId) {\n  userId =\n    String(\n      trigItem.message?.from?.id ||\n      trigItem.callback_query?.from?.id ||\n      trigItem.callback_query?.message?.chat?.id ||\n      trigItem.from?.id ||\n      ''\n    ).trim();\n}\n\n// –ù–û–í–ò–ô –ø—Ä–µ—Ñ—ñ–∫—Å\nconst ref_tag = userId ? `_tgr_${userId}` : 'share';\n\n// --- 2) –¢–û–ü –∑–∞–∫—Ä–∏—Ç–∏–π? ---\nif (!isTopUnlockedByPurchase && totalInvited < REQUIRED_INVITES) {\n  const left     = REQUIRED_INVITES - totalInvited;\n  const lockedFn = lockedMsgByLang[lang] || lockedMsgByLang.en;\n\n  return [{\n    json: {\n      message:   lockedFn(left),\n      shareUrl:  buildHubShare(ref_tag),\n      shareLabel,\n      unlockLabel,\n      topStatus: 'locked',\n      langDebug: {\n        rawLangCode,\n        baseLang,\n        lang,\n        translatorLang,\n        trigLang,\n        globalLang,\n      },\n    }\n  }];\n}\n\n// --- 3) –¢–û–ü –≤—ñ–¥–∫—Ä–∏—Ç–∏–π ---\nconst topSheet = topRows.map(i => i.json);\n\nif (!topSheet.length) {\n  return [{\n    json: {\n      message:  errorFetchByLang[lang] || errorFetchByLang.en,\n      shareUrl: buildHubShare(ref_tag),\n      shareLabel,\n      topStatus: 'open',\n      langDebug: {\n        rawLangCode,\n        baseLang,\n        lang,\n        translatorLang,\n        trigLang,\n        globalLang,\n      },\n    }\n  }];\n}\n\nlet topBots = topSheet.filter(b =>\n  String(b['Category'] ?? '').trim().toUpperCase() === 'TOP' &&\n  String(b['Active'] ?? 'true').toLowerCase() !== 'false'\n);\n\nif (!topBots.length) {\n  return [{\n    json: {\n      message:  errorEmptyTopByLang[lang] || errorEmptyTopByLang.en,\n      shareUrl: buildHubShare(ref_tag),\n      shareLabel,\n      topStatus: 'open',\n      langDebug: {\n        rawLangCode,\n        baseLang,\n        lang,\n        translatorLang,\n        trigLang,\n        globalLang,\n      },\n    }\n  }];\n}\n\n// sort by ROI Score\ntopBots.sort((a, b) => (parseFloat(b['ROI Score']) || 0) - (parseFloat(a['ROI Score']) || 0));\n\nconst LIMIT = 3900;\nlet body = '';\n\nfor (const bot of topBots) {\n  const name       = bot['Bot Name'] ?? 'Bot';\n  const desc       = getDescription(bot, lang);\n  const commission = bot['Commission (%)'] ?? 0;\n  let   link       = bot['Referral Link'] ?? '';\n\n  if (/t\\.me\\/HubAggregatorBot/i.test(link)) {\n    // —è–∫—â–æ –Ω–µ–º–∞—î –Ω–∞—à–æ–≥–æ start (_tgr_ –∞–±–æ tgr_) ‚Äî –≤—Å—Ç–∞–≤–ª—è—î–º–æ; —è–∫—â–æ start=share ‚Äî –∑–∞–º—ñ–Ω—é—î–º–æ\n    if (!/(\\?|&)start=(?:_?tgr_)/i.test(link) && ref_tag) {\n      link = link.replace(/(\\?|\\&)start=share\\b/i, `$1start=${encodeURIComponent(ref_tag)}`);\n      if (!/(\\?|&)start=/i.test(link)) {\n        link += (link.includes('?') ? '&' : '?') + `start=${encodeURIComponent(ref_tag)}`;\n      }\n    }\n  } else {\n    link = personalizeReferral(link, ref_tag);\n  }\n\n  const block = `ü§ñ <b>${name}</b>\n${desc}\nü™ô ${bonusLabel}: ${commission}%\nüëâ <a href=\"${link}\">${openLabel}</a>`;\n\n  const add = (body ? '\\n\\n' : '') + block;\n  if (body.length + add.length > LIMIT) break;\n  body += add;\n}\n\nlet message;\nif (!body) {\n  message = emptyAfterTrimByLang[lang] || emptyAfterTrimByLang.en;\n} else {\n  message = `${topIntro}\\n\\n${body}`;\n}\n\nreturn [{\n  json: {\n    message,\n    shareUrl:  buildHubShare(ref_tag),\n    shareLabel,\n    topStatus: 'open',\n    langDebug: {\n      rawLangCode,\n      baseLang,\n      lang,\n      translatorLang,\n      trigLang,\n      globalLang,\n    },\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2448,
        -2016
      ],
      "id": "d558accb-771d-49e9-b722-2642c84c34d8",
      "name": "Format_TopBots_Message"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1841956048,
          "mode": "list",
          "cachedResultName": "Partners_Settings",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1841956048"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Active",
              "lookupValue": "=Yes"
            },
            {
              "lookupColumn": "Verified",
              "lookupValue": "=Yes"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2640,
        -1840
      ],
      "id": "c90db021-c327-4317-8671-14918c3b1830",
      "name": "/partners",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1Ô∏è‚É£ –ú–æ–≤–∞ –∑ –Ω–æ–¥–∏ \"Extract message data\" (—î–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥–∏)\nconst ctx = $items('Extract message data')[0]?.json || {};\n\n// –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: userLang ‚Üí language ‚Üí lang ‚Üí 'uk'\nconst rawLangCode = ctx.userLang || ctx.language || ctx.lang || 'uk';\nconst baseLang = (rawLangCode || 'uk').split('-')[0].toLowerCase();\n\n// –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –º–æ–≤–∏\nconst supported = ['uk', 'en', 'ru', 'de', 'es'];\nconst lang = supported.includes(baseLang) ? baseLang : 'en';\n\n// 2Ô∏è‚É£ –õ–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —ñ–Ω—Ç—Ä–æ-—Ç–µ–∫—Å—Ç\nconst introByLang = {\n  uk: 'ü§ñ <b>–ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ Telegram-–±–æ—Ç–∏, —è–∫—ñ –Ω–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å –∑—ñ—Ä–∫–∏ –∑–∞ –¥—ñ—ó</b>\\n–û–±–∏—Ä–∞–π –±—É–¥—å-–∫–æ–≥–æ ‚Äî –∑–∞–ø—É—Å–∫–∞–π —ñ –ø—Ä–æ–∫–∞—á—É–π—Å—è! üí™',\n  en: 'ü§ñ <b>Verified Telegram bots that give you Stars for actions</b>\\nPick any ‚Äî launch and level up! üí™',\n  ru: 'ü§ñ <b>–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ Telegram-–±–æ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç –∑–≤—ë–∑–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</b>\\n–í—ã–±–∏—Ä–∞–π –ª—é–±–æ–≥–æ ‚Äî –∑–∞–ø—É—Å–∫–∞–π –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞–π—Å—è! üí™',\n  de: 'ü§ñ <b>Verifizierte Telegram-Bots, die dir Stars f√ºr Aktionen geben</b>\\nSuch dir einen aus ‚Äì starte und level dich hoch! üí™',\n  es: 'ü§ñ <b>Bots de Telegram verificados que te dan Stars por tus acciones</b>\\nElige cualquiera ‚Äî ¬°l√°nzalo y sube de nivel! üí™',\n};\n\nconst launchLabelByLang = {\n  uk: '–ó–∞–ø—É—Å—Ç–∏—Ç–∏',\n  en: 'Launch',\n  ru: '–ó–∞–ø—É—Å—Ç–∏—Ç—å',\n  de: 'Starten',\n  es: 'Iniciar',\n};\n\nconst intro = introByLang[lang] || introByLang.en;\nconst launchLabel = launchLabelByLang[lang] || launchLabelByLang.en;\n\n// 3Ô∏è‚É£ –û–ø–∏—Å: Description_lang –∞–±–æ –±–∞–∑–æ–≤–∏–π Description\nfunction getDescription(row, langCode) {\n  const base = row['Description'] || '';\n  const localizedKey = `Description_${langCode}`;\n  return row[localizedKey] || base;\n}\n\n// items –≤–∂–µ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω—ñ –Ω–æ–¥–æ—é /partners (Active=Yes, Verified=Yes)\nconst rows = items;\n\n// 4Ô∏è‚É£ –§–æ—Ä–º—É—î–º–æ —Å–ø–∏—Å–æ–∫\nconst messages = rows.map((item, index) => {\n  const row = item.json;\n  const name = row['Bot Name'] || 'Bot';\n  const desc = getDescription(row, lang);\n  const link = row['Referral Link'] || '#';\n\n  const num = index + 1;\n  return `‚≠ê <b>${num}. ${name}</b>\\n${desc}\\nüîó <a href=\"${link}\">${launchLabel}</a>`;\n});\n\n// 5Ô∏è‚É£ –Ø–∫—â–æ —Ä–∞–ø—Ç–æ–º –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ\nif (messages.length === 0) {\n  const emptyByLang = {\n    uk: '–ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤. –ó–∞–≥–ª—è–Ω—å —Ç—Ä–æ—Ö–∏ –ø—ñ–∑–Ω—ñ—à–µ üòâ',\n    en: 'There are no available partners yet. Check back a bit later üòâ',\n    ru: '–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤. –ó–∞–≥–ª—è–Ω–∏ –ø–æ–∑–∂–µ üòâ',\n    de: 'Es sind noch keine Partner verf√ºgbar. Schau sp√§ter noch mal vorbei üòâ',\n    es: 'Todav√≠a no hay partners disponibles. Vuelve un poco m√°s tarde üòâ',\n  };\n  const emptyMsg = emptyByLang[lang] || emptyByLang.en;\n\n  return [{\n    json: {\n      message: `${intro}\\n\\n${emptyMsg}`,\n      langDebug: {\n        rawLangCode,\n        lang,\n      },\n    },\n  }];\n}\n\n// 6Ô∏è‚É£ –§—ñ–Ω–∞–ª—å–Ω–∏–π —Ç–µ–∫—Å—Ç\nconst body = messages.join('\\n\\n');\n\nreturn [{\n  json: {\n    message: `${intro}\\n\\n${body}`,\n    langDebug: {\n      rawLangCode,\n      lang,\n    },\n  },\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2448,
        -1840
      ],
      "id": "53423916-2404-4ec0-ba7a-5d00b1cf99c2",
      "name": "format_partners_list"
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $json.message }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.share_button }}",
                    "additionalFields": {
                      "callback_data": "share_from_partners"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.partners_btn_top_partners }}",
                    "additionalFields": {
                      "callback_data": "/top"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.partners_btn_earnings }}",
                    "additionalFields": {
                      "callback_data": "/earnings"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "1b2c0b0f-8d69-4cc6-bab8-bbe28ff02345",
      "name": "partners",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -2240,
        -1840
      ],
      "webhookId": "a2156b9c-a4a7-4f88-b96c-166e6e36ece6",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ \n  $('Trigger').first().json.message?.from?.id\n  || $('Trigger').first().json.callback_query?.from?.id\n  || $('Trigger').first().json.callback_query?.message?.chat?.id\n}}\n",
        "text": "={{ $json.message }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $json.shareLabel || 'üß° –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å HubAggregator' }}",
                    "additionalFields": {
                      "url": "={{ $json.shareUrl || '' }}"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "37517785-f508-4df3-8fd2-21655abe3538",
      "name": "top",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -1984,
        -2160
      ],
      "webhookId": "b1dfb074-d3aa-4aca-b419-cbd851b79b74",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "User Chat ID",
              "lookupValue": "={{ $('Trigger').first().json.message.from.id.toString() }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2864,
        -2256
      ],
      "id": "814382f5-7fda-48ef-b719-407f8c71c4af",
      "name": "read_user_wallet",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ !$json[\"Wallet Address\"] || $json[\"Wallet Address\"].trim() === \"\" }}",
                    "rightValue": true,
                    "operator": {
                      "type": "boolean",
                      "operation": "false",
                      "singleValue": true
                    },
                    "id": "a2e153f8-b43d-41f0-93d1-9ad19d2fda8b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "exists"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "65045024-df40-4fea-b82a-e7e49c0e37bc",
                    "leftValue": "={{ !$json[\"Wallet Address\"] || $json[\"Wallet Address\"].trim() === \"\" }}",
                    "rightValue": true,
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "not_exists"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -2704,
        -2256
      ],
      "id": "900ce193-c52d-46c2-9e39-d316e93474cf",
      "name": "Switch_wallet_check"
    },
    {
      "parameters": {
        "jsCode": "/**\n * Format_Wallet_Info\n * –í—Ö—ñ–¥: —Ä—è–¥–æ–∫ –∑ —Ç–∞–±–ª–∏—Ü—ñ user_wallets\n * –í–∏—Ö—ñ–¥: { WalletInfo: '...' } –∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º –º–æ–≤–∏\n */\n\nconst row = $json;\nconst t = $node['Translator'].json; // –Ω–∞—à –ø–µ—Ä–µ–∫–ª–∞–¥–∞—á\n\nconst wallet = row['Wallet Address'] || '';\nconst earned = row['Total Earned TON'] ?? 0;\n\nlet WalletInfo;\n\nif (!wallet) {\n  // –Ω–µ–º–∞—î –≥–∞–º–∞–Ω—Ü—è\n  WalletInfo = t.wallet_info_empty || 'üòê You don‚Äôt have a saved TON wallet yet.';\n} else {\n  // —î –≥–∞–º–∞–Ω–µ—Ü—å ‚Äî –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î–º–æ —à–∞–±–ª–æ–Ω–∏ –∑ Translator\n  const savedTpl =\n    t.wallet_info_saved || 'üëõ Your TON wallet:\\n<code>{{wallet}}</code>';\n  const earnedTpl =\n    t.wallet_info_earnings || 'üí∏ Earned: <b>{{amount}}</b> TON';\n\n  const part1 = savedTpl.replace('{{wallet}}', wallet);\n  const part2 = earnedTpl.replace('{{amount}}', earned);\n\n  WalletInfo = `${part1}\\n${part2}`;\n}\n\nreturn [\n  {\n    json: {\n      WalletInfo,\n    },\n  },\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2464,
        -2384
      ],
      "id": "5a292a38-71a8-47aa-af66-dc17150d1303",
      "name": "format_wallet_info"
    },
    {
      "parameters": {
        "jsCode": "/**\n * Wallet_not_found ‚Üí –ø–æ–∫–∞–∑—É—î –±–∞–≥–∞—Ç–æ–º–æ–≤–Ω—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –∑ –≥–∞–º–∞–Ω—Ü–µ–º\n * –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–ª—é—á wallet_help —ñ–∑ Translator\n */\n\nconst tr = $node[\"Translator\"].json || {};\n\nconst text =\n  tr.wallet_help ||        // –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –ª—ñ–Ω–∫–∞–º–∏\n  tr.wallet_not_found ||   // –∫–æ—Ä–æ—Ç–∫–∞ –≤–µ—Ä—Å—ñ—è, —è–∫—â–æ —Ä–∞–ø—Ç–æ–º –Ω–µ–º–∞\n  tr.wallet_info_empty ||  // —â–µ –æ–¥–∏–Ω –∑–∞–ø–∞—Å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç\n  \"‚ö†Ô∏è You don‚Äôt have a saved TON wallet yet.\\n\\n\" +\n  \"How to save: open any TON wallet, copy your address and send it here.\";\n\nreturn [\n  {\n    json: {\n      WalletInfo: text,\n    },\n  },\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2464,
        -2208
      ],
      "id": "7fc412e2-9502-4540-aae4-54b40c9f6b73",
      "name": "wallet_not_found"
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $json.WalletInfo }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.btn_buy_stars }}",
                    "additionalFields": {
                      "url": "tg://resolve?domain=wallet"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "c5ea71ce-3be2-43b5-9269-7c39bdcee702",
      "name": "wallet_info",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -2288,
        -2384
      ],
      "webhookId": "c17fdd95-ce63-4ed2-9e3e-4f901c8fe2b6",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').item.json.message?.chat?.id\n  || $('Trigger').item.json.callback_query?.from?.id\n  || $('Trigger').item.json.pre_checkout_query?.from?.id }}",
        "text": "={{ $json.WalletInfo }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "ca3aabc8-3737-4936-9a5a-3ac49cc98bc1",
      "name": "wallet_not_found1",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -2288,
        -2208
      ],
      "webhookId": "89fe9d62-a859-401e-86c0-2c99fa1c2898",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "ef0fcd52-5bca-47f8-bd7d-77b3520f29b4",
              "leftValue": "={{ $('Code').first().json.regex_match }}",
              "rightValue": "=true",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2944,
        -1136
      ],
      "id": "65792394-2d34-4f5a-a3b0-5f0fee597b2f",
      "name": "is_valid_wallet_format"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "User Chat ID": "={{ $('Trigger').first().json.message.chat.id }}",
            "Username": "={{ $('Trigger').first().json.message.chat.username }}",
            "Last Updated": "={{ $now.toFormat(\"yyyy-MM-dd HH:mm:ss\") }}",
            "Wallet Address": "={{ $(\"Code\").first().json.trimmed?.toString() || '' }}"
          },
          "matchingColumns": [
            "User Chat ID"
          ],
          "schema": [
            {
              "id": "User Chat ID",
              "displayName": "User Chat ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Username",
              "displayName": "Username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Wallet Address",
              "displayName": "Wallet Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Earned TON",
              "displayName": "Total Earned TON",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Comment",
              "displayName": "Comment",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Level",
              "displayName": "Level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Total Invited",
              "displayName": "Total Invited",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Bonus Date",
              "displayName": "Last Bonus Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Referred By",
              "displayName": "Referred By",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "First Join Date",
              "displayName": "First Join Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Language",
              "displayName": "Language",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Geo",
              "displayName": "Geo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2768,
        -1280
      ],
      "id": "703ad50d-b6b6-4231-a705-0f8d2976cbe3",
      "name": "create_wallet_entry",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $node[\"Translator\"].json.wallet_saved }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.btn_buy_stars }}",
                    "additionalFields": {
                      "url": "tg://resolve?domain=wallet"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "e6c632a4-753f-4338-95f7-9044703bee2f",
      "name": "create_wallet_entry1",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -2592,
        -1280
      ],
      "webhookId": "8c8a37f0-f16f-4f90-b09c-678cd27f4ba5",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $node[\"Translator\"].json.wallet_invalid_format }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "cb8cc213-9237-493d-ac6a-7573883a8845",
      "name": "is_valid_wallet_format1",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -2608,
        -1104
      ],
      "webhookId": "51e661a8-76bd-4379-98be-8f67139c377e",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "return [{\n  original: $('Trigger').first().json.message.text,\n  trimmed: $('Trigger').first().json.message.text.trim(),\n  length: $('Trigger').first().json.message.text.length,\n  trimmed_length: $('Trigger').first().json.message.text.trim().length,\n  regex_match: /^(?:EQ|UQ|kQ|0Q)[A-Za-z0-9_-]{46,48}$/.test($('Trigger').first().json.message.text.trim())\n}]\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3104,
        -1136
      ],
      "id": "919002f6-e35b-406d-8b8e-50da7a9a0e6e",
      "name": "Code"
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $node[\"Translator\"].json.text }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "9d1a918a-dde7-4132-b432-d0dad671c3bd",
      "name": "info",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -3024,
        -1312
      ],
      "webhookId": "f79693b7-78ec-447e-a905-aa33715358f3",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message.from.id }}",
        "text": "={{ $node[\"Translator\"].json[\"text\"] }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "dcb46355-c360-447a-b029-8790f420321b",
      "name": "start",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -3008,
        -1456
      ],
      "webhookId": "340db778-44ce-4d46-acf2-1c29fe97dd29",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π item (–∑ Format_Log_Entry / Check_If_Referral)\nconst base = $json || {};\n\n// Telegram update –∑ Trigger\nconst trig = $('Trigger').first().json || {};\n\n// –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π from (message / callback / payments / —ñ–Ω—à–µ)\nconst from =\n  trig.message?.from ||\n  trig.callback_query?.from ||\n  trig.pre_checkout_query?.from ||\n  trig.successful_payment?.from ||\n  trig.my_chat_member?.from ||\n  trig.from ||\n  {};\n\n// ID —é–∑–µ—Ä–∞\nconst userId =\n  String(\n    from.id ||\n    base['User Chat ID'] ||\n    ''\n  );\n\n// username\nconst username =\n  from.username ||\n  base['Username'] ||\n  (userId ? `user${userId}` : 'anon');\n\n// –º–æ–≤–∞\nconst userLang =\n  from.language_code ||\n  base['Language'] ||\n  'en';\n\n// —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π —Ç–µ–≥ –¥–ª—è /share\nconst ref_tag = userId ? `_tgr_${userId}` : 'share';\n\n// —ñ–º º—è –±–æ—Ç–∞\nconst botName = 'HubAggregatorBot';\n\n// –ø–æ—Å–∏–ª–∞–Ω–Ω—è –¥–ª—è start-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞\nconst referralLink = `https://t.me/${botName}?start=${encodeURIComponent(ref_tag)}`;\n\nreturn [\n  {\n    json: {\n      // –∑–∞–ª–∏—à–∞—î–º–æ –≤—Å—ñ –ø–æ–ª—è, —â–æ –ø—Ä–∏–π—à–ª–∏ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –Ω–æ–¥\n      ...base,\n\n      // –¥–æ–¥–∞—î–º–æ —Å–ª—É–∂–±–æ–≤—ñ –ø–æ–ª—è\n      userId,\n      username,\n      userLang,\n      ref_tag,\n      referralLink,\n    },\n  },\n];\n"
      },
      "id": "71311da2-05fb-4752-b2a2-4727bdd53e54",
      "name": "Extract_User_Info",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2800,
        -1696
      ]
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "lookup",
        "sheetId": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
        "range": "user_wallets!A:O",
        "lookupColumn": "User Chat ID",
        "lookupValue": "={{ $('Extract_User_Info').first().json.userId.toString() }}",
        "options": {
          "continue": true,
          "valueRenderMode": "UNFORMATTED_VALUE"
        }
      },
      "id": "f52f18eb-d7c0-45cb-9fd6-d80babaace46",
      "name": "Check_If_User_Exists",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 1,
      "position": [
        -2640,
        -1664
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{ $('Trigger').first().json.message?.from?.id || $('Trigger').first().json.callback_query?.from?.id }}",
        "text": "={{ $node[\"Translator\"].json.translations.share_referral.replace('[[referralLink]]', $node[\"Extract_User_Info\"].json.referralLink) }}\n",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.share_button }}\n",
                    "additionalFields": {
                      "url": "={{ 'https://t.me/share/url?url=' \n    + encodeURIComponent($node[\"Extract_User_Info\"].json.referralLink)\n    + '&text=' \n    + encodeURIComponent(\n         $node[\"Translator\"].json.translations.share_referral\n           .replace('[[referralLink]]', $node[\"Extract_User_Info\"].json.referralLink)\n      )\n}}\n"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "92ace0b9-f959-4194-adc9-6aace9935b9d",
      "name": "Send_Referral",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1936,
        -1808
      ],
      "webhookId": "313ea717-77c0-47c9-909e-05cbbffd0fc6",
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "7cca9adf-0a05-4b35-bf98-58884100589f",
              "leftValue": "={{ $json[\"User Chat ID\"].toString() }}",
              "rightValue": "={{ $('Extract_User_Info').first().json.userId.toString() }}",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2384,
        -1664
      ],
      "id": "0a644fe9-7541-4a15-ac80-384dfd22ef88",
      "name": "Filter_User_By_ID"
    },
    {
      "parameters": {
        "functionCode": "// –ë–µ—Ä–µ–º–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∞–ø–¥–µ–π—Ç –∑ Trigger\nconst trig = $node['Trigger'].json || {};\n\n// –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ –¥—ñ—Å—Ç–∞—î–º–æ from (–¥–ª—è message —ñ callback_query)\nconst from =\n  trig.callback_query?.from ||\n  trig.message?.from ||\n  trig.pre_checkout_query?.from ||\n  trig.successful_payment?.from ||\n  trig.from ||\n  {};\n\n// userId –∑ –∫—ñ–ª—å–∫–æ—Ö –º–æ–∂–ª–∏–≤–∏—Ö –º—ñ—Å—Ü—å, —â–æ–± —Ç–æ—á–Ω–æ –Ω–µ –≤–ø–∞—Å—Ç–∏\nconst userId = (\n  from.id ||\n  $json[\"User Chat ID\"] ||\n  $json[\"User ID\"] ||\n  0\n).toString();\n\n// username –∑ Telegram –∞–±–æ –∑ –ª–æ–≥—ñ–≤\nconst username =\n  from.username ||\n  $json[\"Username\"] ||\n  'anon';\n\n// –¥–∞–ª—ñ –∑–∞–ª–∏—à–∞—î–º–æ —è–∫ —É —Ç–µ–±–µ\nconst tgr = `_tgr_${userId}`;\nconst referralLink = `https://t.me/EarnHubBot?start=${tgr}`;\n\nreturn [\n  {\n    json: {\n      userId,\n      username,\n      tgr,\n      referralLink,\n      timestamp: new Date().toISOString()\n    }\n  }\n];\n"
      },
      "id": "18434eac-560b-46bd-8f80-bbc5256252ce",
      "name": "Extract_Share_Referral_Info",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        -2832,
        -1536
      ]
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "operation": "lookup",
        "sheetId": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
        "range": "user_wallets!A:O",
        "lookupColumn": "User Chat ID",
        "lookupValue": "={{ $('Extract_Share_Referral_Info').first().json.userId }}",
        "options": {
          "continue": true
        }
      },
      "id": "de85ccc2-23e7-479e-8be1-5df8ab5b7690",
      "name": "Read_Wallets_Sheet",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 1,
      "position": [
        -2640,
        -1504
      ],
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// –ë–µ—Ä–µ–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Ä—è–¥–æ–∫ —ñ–∑ —Ç–∞–±–ª–∏—Ü—ñ –≥–∞–º–∞–Ω—Ü—ñ–≤\nconst user = $json;\n\n// üî† –¢—Ä–∞–Ω—Å–ª–µ–π—Ç–æ—Ä (–º–æ–≤–∏ + —Ç–µ–∫—Å—Ç–∏)\nconst tr = $node['Translator'].json || {};\nfunction t(key, vars = {}) {\n  const translations = tr.translations || {};\n  let s = translations[key] || key;\n  for (const k of Object.keys(vars)) {\n    s = s.replace(new RegExp(`{{${k}}}`, 'g'), String(vars[k]));\n  }\n  return s;\n}\n\n// –ü–æ—Ç–æ—á–Ω–∞ –º–æ–≤–∞ (–¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ñ—Ä–∞–∑ —Ç–∏–ø—É \"–¥—Ä—É–∑—ñ–≤ / friends\")\nconst lang = tr.detectedLang || 'en';\nconst langMap = {\n  uk: { friends: '–¥—Ä—É–∑—ñ–≤', toTop: '–¥–æ TOP', refLabel: 'üîó –¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞ –ª—ñ–Ω–∫–∞:' },\n  en: { friends: 'friends', toTop: 'to TOP', refLabel: 'üîó Your referral link:' },\n  ru: { friends: '–¥—Ä—É–∑–µ–π', toTop: '–¥–æ TOP', refLabel: 'üîó –¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:' },\n  de: { friends: 'Freunde', toTop: 'bis TOP', refLabel: 'üîó Dein Empfehlungslink:' },\n  es: { friends: 'amigos', toTop: 'hasta TOP', refLabel: 'üîó Tu enlace de referido:' },\n};\nconst LM = langMap[lang] || langMap.en;\n\n// 1) ID —é–∑–µ—Ä–∞ (–≥–æ–ª–æ–≤–Ω–µ –ø–æ–ª–µ –∑ —Ç–∞–±–ª–∏—Ü—ñ)\nconst id =\n  user['User Chat ID'] ||\n  user.UserID ||\n  user.id ||\n  user.from_id ||\n  '0';\n\n// 2) –ö—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω–≤–∞–π—Ç—ñ–≤ ‚Äî –∑ –∫–æ–ª–æ–Ω–∫–∏ \"Total Invited\"\nconst invites = Number(user['Total Invited'] ?? 0);\nconst REQUIRED_INVITES = 5;\nconst needed = Math.max(0, REQUIRED_INVITES - invites);\n\n// –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä 0‚Äì5 (–∫–æ–ª—å–æ—Ä–æ–≤–∏–π)\nconst totalSteps = REQUIRED_INVITES;\nconst filled = Math.min(invites, totalSteps);\n\nconst barFilled = 'üü©'.repeat(filled);\nconst barEmpty = '‚¨úÔ∏è'.repeat(totalSteps - filled);\nconst bar = barFilled + barEmpty;\n\n// 3) refTag ‚Äî —è–∫ —É /share (—è–∫—â–æ —î tgr –∑ –Ω–æ–¥–∏ Extract_Share_Referral_Info)\nconst shareItem = $items('Extract_Share_Referral_Info', 0, 0)?.json || {};\nconst refTag = (shareItem.tgr || `user_${id}`).toString().trim();\n\n// 4) –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è\nlet referralLink = `https://t.me/HubAggregatorBot?start=${refTag}`;\nreferralLink = referralLink.trim();\n\n// 5) –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —î –≥–∞–º–∞–Ω–µ—Ü—å —ñ –∑–∞—Ä–æ–±—ñ—Ç–æ–∫\nconst hasWallet = !!user['Wallet Address'];\nconst hasEarned = user['Total Earned TON'] != null && user['Total Earned TON'] !== '';\n\nconst wallet = user['Wallet Address'] || '_';\nconst earned = user['Total Earned TON'] || '0';\n\n// –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π –∫—Ä–æ–∫ 1 —É –±–ª–æ—Ü—ñ \"–©–æ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞—Ä–∞–∑\"\nlet step1;\nif (needed > 0) {\n  step1 = t('earnings_step1_locked', { needed });\n} else {\n  step1 = t('earnings_step1_open');\n}\n\n// üßæ –•–µ–¥–µ—Ä (–∑–∞–≥–æ–ª–æ–≤–æ–∫ + —Å—Ç–µ–π—Ç –≥–∞–º–∞–Ω—Ü—è/–∑–∞—Ä–æ–±—ñ—Ç–∫—É)\nlet headerPart = '';\nif (hasWallet && hasEarned) {\n  headerPart =\n    `<b>${t('earnings_title')}</b>\\n\\n` +\n    t('earnings_has_income', { wallet, earned }) +\n    '\\n\\n';\n} else {\n  headerPart =\n    `<b>${t('earnings_title')}</b>\\n\\n` +\n    t('earnings_no_income') +\n    '\\n\\n';\n}\n\n// üîó –ë–ª–æ–∫ —ñ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–º –ª—ñ–Ω–∫–æ–º (–∫–æ—Ä–æ—Ç–∫–∏–π, –∞–ª–µ –º—É–ª—å—Ç–∏–º–æ–≤–Ω–∏–π)\nconst referralBlock =\n  `${LM.refLabel}\\n` +\n  `${referralLink}\\n`;\n\n// ‚≠ê –ë–ª–æ–∫ 1 ‚Äî TOP\nconst block1 =\n`‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n<b>${t('earnings_block1_title')}</b>\n\nüë• ${invites} / ${totalSteps} ${LM.friends}\n${bar}  +${needed} ${LM.toTop}\n(${t('earnings_btn_unlock_top')})\n\n${referralBlock}\n\n${t('earnings_block1_line1')}\n${t('earnings_block1_benefit1')}\n${t('earnings_block1_benefit2')}\n${t('earnings_block1_benefit3')}`;\n\n// üí∏ –ë–ª–æ–∫ 2 ‚Äî 7% –≤—ñ–¥ Telegram\nconst block2 =\n`‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n<b>${t('earnings_block2_title')}</b>\n\n${t('earnings_block2_how_it_works')}\n\n${t('earnings_block2_examples')}\n\n<b>${t('earnings_enable_7_title')}</b>\n${t('earnings_enable_7_steps')}`;\n\n// üöÄ –ë–ª–æ–∫ 3 ‚Äî –©–æ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞—Ä–∞–∑\nconst block3 =\n`‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n<b>${t('earnings_block3_title')}</b>\n\n${step1}\n${t('earnings_step2')}\n${t('earnings_step3')}\n${t('earnings_step4')}\n\n${t('earnings_auto_stats')}`;\n\nconst text = `${headerPart}${block1}\\n\\n${block2}\\n\\n${block3}`;\n\n// n8n –≤–∏–º–∞–≥–∞—î –ú–ê–°–ò–í –µ–ª–µ–º–µ–Ω—Ç—ñ–≤\nreturn [\n  {\n    json: {\n      text,\n      referralLink,\n      invites,\n      needed,\n      wallet,\n      earned,\n    },\n  },\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2208,
        -1456
      ],
      "id": "cfc2781c-f76f-4a18-8546-3737b9176757",
      "name": "Build_Earnings_Message"
    },
    {
      "parameters": {
        "chatId": "={{\n  (() => {\n    const trig = $node[\"Trigger\"].json || {};\n\n    const from =\n      (trig.callback_query && trig.callback_query.from) ||\n      (trig.message && trig.message.from) ||\n      trig.from ||\n      {};\n\n    return (\n      from.id ||\n      $json[\"User Chat ID\"] ||\n      $json[\"User ID\"] ||\n      0\n    );\n  })()\n}}\n",
        "text": "={{ $json.text }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.share_button }}",
                    "additionalFields": {
                      "callback_data": "share_from_earnings"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.earnings_btn_unlock_top }}",
                    "additionalFields": {
                      "callback_data": "buy_top"
                    }
                  },
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.earnings_btn_top_partners }}",
                    "additionalFields": {
                      "callback_data": "=/top"
                    }
                  }
                ]
              }
            },
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.earnings_btn_activate_7 }}",
                    "additionalFields": {
                      "callback_data": "activate_7"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "99aba8fe-4be2-439b-a5ba-d2ef93884e86",
      "name": "Send_Earnings_Message",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -1984,
        -1456
      ],
      "webhookId": "6037fce6-d20b-4807-85b3-89bac7d7d879",
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Extract message data (works for both message & callback_query)\n\nconst trig = $('Trigger').first().json || {};\n\n// message, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –≤ —á–∞—Ç—ñ (–º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥ –±–æ—Ç–∞)\nconst message =\n  trig.message ||\n  (trig.callback_query && trig.callback_query.message) ||\n  {};\n\n// —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–¥–∂–µ—Ä–µ–ª–æ –º–æ–≤–∏, id, username)\nconst from =\n  (trig.callback_query && trig.callback_query.from) ||\n  message.from ||\n  trig.from ||\n  {};\n\nlet refParam = '';\n\n// /start <payload> ‚Äì —Ç—ñ–ª—å–∫–∏ –∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ message\nif (message.text && message.text.startsWith('/start')) {\n  const parts = message.text.split(' ');\n  refParam = parts[1] || '';\n}\n\n// —Å–∏—Ä–∏–π —Ç–µ–∫—Å—Ç / –∫–æ–º–∞–Ω–¥–∞:\n//  - –¥–ª—è callback ‚Üí callback_query.data (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ \"buy_top\" –∞–±–æ \"/buy_top\")\n//  - –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è ‚Üí message.text\nconst rawText =\n  (trig.callback_query && (trig.callback_query.data || '').trim()) ||\n  (message.text || '').trim() ||\n  '';\n\nconst match = rawText.match(/^\\/?([a-zA-Z–∞-—è–ê-–Ø0-9_]+)/);\nconst cmd = match ? match[1].toLowerCase() : null;\n\n// üîë –º–∞–ø–∞ –∫–æ–º–∞–Ω–¥ ‚Üí –∫–ª—é—á—ñ–≤ —É Translator\nconst commandToKey = {\n  start: 'welcome',\n  // wallet: 'wallet',\n  // info: 'info',\n  // partners: 'partners',\n  // top: 'top',\n  // buy_top: 'buy_top',\n};\n\nconst msgKey = cmd ? (commandToKey[cmd] || cmd) : null;\n\nconst langCode = from.language_code || '';      // –Ω–∞–ø—Ä. \"en\", \"en-US\"\nconst shortLang = langCode.split('-')[0] || ''; // \"en\", \"uk\" —Ç–æ—â–æ\n\nreturn [{\n  json: {\n    refParam,\n    userChatId: from.id || '',\n    username: from.username || '',\n    firstName: from.first_name || '',\n    lastName: from.last_name || '',\n    messageId: message.message_id || '',\n    messageText: rawText,\n    language: langCode,   // üåê –ø–æ–≤–Ω–∏–π –∫–æ–¥\n    userLang: shortLang,  // ‚úÖ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥ (en, uk, de, es, ru)\n    msgKey,\n    _msgKey: msgKey,\n    _originalText: rawText\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -6000,
        -1696
      ],
      "id": "370e3d82-7411-4ce6-b0a1-8f172490ff72",
      "name": "Extract message data"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"Timestamp\": \"{{$now.toISO()}}\",\n  \"User Chat ID\": \"{{ $json.userChatId }}\",\n  \"Username\": \"{{ $json.username }}\",\n  \"First Name\": \"{{ $json.firstName }}\",\n  \"Last Name\": \"{{ $json.lastName }}\",\n  \"Message ID\": \"{{ $json.messageId }}\",\n  \"Message Text\": \"{{ $json.messageText }}\",\n  \"Original Link\": \"https://t.me/EarnHubAggregatorBot?start={{ $json.refParam }}\",\n  \"Short Link\": \"\",\n  \"Ref Parameter\": \"{{ $json.refParam }}\",\n  \"Clicks\": \"1\",\n  \"Partner Bot\": \"\",\n  \"Commission (%)\": \"\",\n  \"Earned TON\": \"0\",\n  \"Payout Status\": \"Unpaid\",\n  \"Payout Date\": \"\",\n  \"Referred By\": \"{{ $json.refParam }}\",\n  \"Referral Level\": \"{{ $json.refParam ? '1' : '0' }}\",\n  \"Smart Link\": \"\",\n  \"Click Type\": \"{{ $json.refParam ? 'Referral' : 'Organic' }}\",\n  \"Language\": \"{{ $json.language }}\",\n  \"Device\": \"\",\n  \"Geo\": \"\",\n  \"Month\": \"{{$now.toFormat('MMMM')}}\",\n  \"Status\": \"‚úÖ Logged\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -5744,
        -1264
      ],
      "id": "dcfeeb1e-7ba3-4732-8053-715e5cfaf0bf",
      "name": "Format_Log_Entry"
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "bot_log",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Timestamp": "={{ $now.toFormat(\"yyyy-MM-dd HH:mm:ss\") }}",
            "User Chat ID": "={{$json[\"User Chat ID\"]}}",
            "Username": "={{$json[\"Username\"]}}",
            "First Name": "={{$json[\"First Name\"]}}",
            "Last Name": "={{$json[\"Last Name\"]}}",
            "Message ID": "={{$json[\"Message ID\"]}}",
            "Message Text": "={{$json[\"Message Text\"]}}",
            "Original Link": "={{$json[\"Original Link\"]}}",
            "Short Link": "={{$json[\"Short Link\"]}}",
            "Ref Parameter": "={{ $json[\"Ref Parameter\"] || \"NO_REF\" }}\n",
            "Clicks": "={{$json[\"Clicks\"]}}",
            "Partner Bot": "={{$json[\"Partner Bot\"]}}",
            "Commission (%)": "={{$json[\"Commission (%)\"]}}",
            "Earned TON": "={{$json[\"Earned TON\"]}}",
            "Payout Status": "={{$json[\"Payout Status\"]}}",
            "Payout Date": "={{$json[\"Payout Date\"]}}",
            "Referred By": "={{ $json[\"referredBy\"] || \"NO_REF\" }}\n",
            "Referral Level": "={{$json[\"Referral Level\"]}}",
            "Smart Link": "={{$json[\"Smart Link\"]}}",
            "Click Type": "={{$json[\"Click Type\"]}}",
            "Language": "={{$json[\"Language\"]}}",
            "Device": "={{$json[\"Device\"]}}",
            "Geo": "={{$json[\"Geo\"]}}",
            "Month": "={{$json[\"Month\"]}}",
            "Status": "={{$json[\"Status\"]}}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Timestamp",
              "displayName": "Timestamp",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "User Chat ID",
              "displayName": "User Chat ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Username",
              "displayName": "Username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "First Name",
              "displayName": "First Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Name",
              "displayName": "Last Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Message ID",
              "displayName": "Message ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Message Text",
              "displayName": "Message Text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Original Link",
              "displayName": "Original Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Short Link",
              "displayName": "Short Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ref Parameter",
              "displayName": "Ref Parameter",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Clicks",
              "displayName": "Clicks",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Partner Bot",
              "displayName": "Partner Bot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Commission (%)",
              "displayName": "Commission (%)",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Earned TON",
              "displayName": "Earned TON",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Payout Status",
              "displayName": "Payout Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Payout Date",
              "displayName": "Payout Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Referred By",
              "displayName": "Referred By",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Referral Level",
              "displayName": "Referral Level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Smart Link",
              "displayName": "Smart Link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Click Type",
              "displayName": "Click Type",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Language",
              "displayName": "Language",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Geo",
              "displayName": "Geo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Month",
              "displayName": "Month",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -5504,
        -1744
      ],
      "id": "7a40ef86-2461-40ee-a227-5eab1ea177f4",
      "name": "Log to bot_log",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Total Invited": "={{$json[\"totalInvited\"]}}",
            "User Chat ID": "={{ $json[\"inviterId\"] }}"
          },
          "matchingColumns": [
            "User Chat ID"
          ],
          "schema": [
            {
              "id": "User Chat ID",
              "displayName": "User Chat ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Username",
              "displayName": "Username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Wallet Address",
              "displayName": "Wallet Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Total Earned TON",
              "displayName": "Total Earned TON",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Comment",
              "displayName": "Comment",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Level",
              "displayName": "Level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Total Invited",
              "displayName": "Total Invited",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Bonus Date",
              "displayName": "Last Bonus Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Referred By",
              "displayName": "Referred By",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "First Join Date",
              "displayName": "First Join Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Language",
              "displayName": "Language",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Geo",
              "displayName": "Geo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -4752,
        -1776
      ],
      "id": "0bc2a439-581d-46b7-a3fc-8cf85954f702",
      "name": "Update Total Invited",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "/**\n * Check_If_Referral ‚Äî WebApp-safe\n * –†–µ—Ñ–µ—Ä–∞–ª —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ payload = _tgr_<letters/digits[-]...> –∞–±–æ legacy tgr_<...>\n */\n\nconst trigger = $('Trigger').first().json ?? {};\nconst msg = trigger.message ?? {};\n\n// 0) –ö–∞–Ω–¥–∏–¥–∞—Ç–∏ payload\nconst qsStart    = String($json['Ref Parameter'] ?? '').trim();    // ?start=...\nconst webAppData = String(msg.web_app_data?.data ?? '').trim();    // web_app\nconst text       = String(msg.text ?? '').trim();                   // /start ...\n\n// 1) /start <payload>\nlet fromText = '';\nif (text) {\n  const m = /^\\/start\\s+([^\\s]+)\\s*$/i.exec(text);\n  if (m) fromText = m[1];\n}\n\n// 2) –í–∞–ª—ñ–¥–∞—Ç–æ—Ä _tgr_ –∞–±–æ legacy tgr_\nconst TGR_RE = /^_?tgr_[a-z0-9-]+$/i;\n\n// 3) –†–µ–∑–µ—Ä–≤–æ–≤–∞–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ (–Ω–µ —Ä–µ—Ñ)\nconst RESERVED = new Set([\n  'partners','top','wallet','earnings','share','info','help','start','settings'\n]);\n\n// 4) –ü–µ—Ä—à–∏–π –≤–∞–ª—ñ–¥–Ω–∏–π tgr; —ñ–≥–Ω–æ—Ä—É—î–º–æ NO_REF/–ø–æ—Ä–æ–∂–Ω—î\nconst candidates = [qsStart, webAppData, fromText]\n  .map(v => String(v || '').trim())\n  .filter(v => v && v.toUpperCase() !== 'NO_REF');\n\nconst pickTgr = candidates.find(v => TGR_RE.test(v)) || '';\nconst lowerPick = pickTgr.toLowerCase();\nconst isValidReferral = !!pickTgr && !RESERVED.has(lowerPick);\n\nconst userChatId = $json['User Chat ID'];\nconst triggerData = $node['Format_Log_Entry']?.json || {};\n\n// üî∏ –°–ø–µ—Ü–≤–∏–ø–∞–¥–æ–∫: —Ç—Ä–∞—Ñ—ñ–∫ —ñ–∑ GPT Store ‚Äî –Ω–µ –≤–≤–∞–∂–∞—î–º–æ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–º\nif (lowerPick === '_tgr_gptstore' || lowerPick === 'tgr_gptstore') {\n  return [{\n    json: {\n      ...triggerData,\n      isReferral: false,\n      inviterCode: 'NO_REF',\n      referredBy: 'NO_REF',\n      'Ref Parameter': 'NO_REF',\n      'Click Type': 'gptstore',       // üëà –º–∞—Ä–∫—É—î–º–æ —è–∫ gptstore\n      inviterId: userChatId,\n      totalInvited: 0\n    }\n  }];\n}\n\n// üîπ –ó–≤–∏—á–∞–π–Ω–∏–π –Ω–µ—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫\nif (!isValidReferral) {\n  return [{\n    json: {\n      ...triggerData,\n      isReferral: false,\n      inviterCode: 'NO_REF',\n      referredBy: 'NO_REF',\n      'Ref Parameter': 'NO_REF',\n      'Click Type': 'Organic',        // üëà —Å—Ç–∞–≤–∏–º–æ Organic\n      inviterId: userChatId,\n      totalInvited: 0\n    }\n  }];\n}\n\n// üü¢ –í–∞–ª—ñ–¥–Ω–∏–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫\nreturn [{\n  json: {\n    ...triggerData,\n    isReferral: true,\n    inviterCode: pickTgr,\n    referredBy: pickTgr,\n    'Ref Parameter': pickTgr,\n    'Click Type': 'Referral',         // üëà —Å—Ç–∞–≤–∏–º–æ Referral\n    inviterId: userChatId,\n    totalInvited: 0\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5616,
        -1472
      ],
      "id": "9b9f6529-3f54-41ce-a6ee-f1851ae249fb",
      "name": "Check: Is Referral"
    },
    {
      "parameters": {
        "jsCode": "// üü¢ –ë–µ—Ä–µ–º–æ –≤—Å—ñ –ª–æ–≥–∏ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –Ω–æ–¥–∏\nconst logs = $items(\"Get bot_log\").map(item => item.json);\n\n// üü¢ –î–∞–Ω—ñ –∑ \"Check: Is Referral\"\nconst inviterData = $items(\"Check: Is Referral\")[0].json;\nconst inviterId = inviterData.inviterId || null;\nconst inviterCode = inviterData.inviterCode || null;\n\n// üü¢ –Ø–∫—â–æ –Ω–µ–º–∞ —ñ–Ω–≤–∞–π—Ç–µ—Ä–∞ ‚Äî –≤–∏—Ö–æ–¥–∏–º–æ\nif (!inviterId || !inviterCode) {\n  return [{\n    json: {\n      ...inviterData,\n      totalInvited: 0\n    },\n    pairedItem: { item: 0 }\n  }];\n}\n\n// üü¢ –§—ñ–ª—å—Ç—Ä—É—î–º–æ –ª–∏—à–µ –≤–∞–ª—ñ–¥–Ω—ñ –∑–∞–ø–∏—Å–∏ (—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ñ, –Ω–µ –ø—É—Å—Ç—ñ, –Ω–µ NO_REF)\nconst validReferrals = logs.filter(log =>\n  log[\"Ref Parameter\"] &&\n  String(log[\"Ref Parameter\"]).trim() !== \"\" &&\n  String(log[\"Ref Parameter\"]).trim().toUpperCase() !== \"NO_REF\"\n);\n\n// üü¢ –ë–µ—Ä–µ–º–æ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è Ref Parameter\nconst uniqueRefs = [...new Set(validReferrals.map(log => String(log[\"Ref Parameter\"]).trim()))];\n\n// üü¢ –ü—ñ–¥—Ä–∞—Ö–æ–≤—É—î–º–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö —Ä–µ—Ñ–µ—Ä–∞–ª—ñ–≤\nconst totalInvited = uniqueRefs.length;\n\n// üü¢ –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –≤—Å–µ –¥–ª—è Switch (paired)\nreturn [{\n  json: {\n    ...inviterData,\n    inviterCode,\n    inviterId,\n    totalInvited\n  },\n  pairedItem: { item: 0 }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5008,
        -1648
      ],
      "id": "be5d5723-efd3-48e4-ae76-edfc1153bfb7",
      "name": "Count Referrals",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "967bc469-928d-4e60-983b-8cf91649b46a",
              "leftValue": "={{ $json[\"Ref Parameter\"].trim().toUpperCase() != \"NO_REF\" }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -5408,
        -1440
      ],
      "id": "4e3ebb27-c5b2-40ca-85c8-ff23ca8450f6",
      "name": "IF (isReferral = true)"
    },
    {
      "parameters": {
        "updates": [
          "*"
        ],
        "additionalFields": {}
      },
      "id": "d4f2dc06-7ac5-4c6f-97d5-38cdda5e7a6f",
      "name": "Trigger",
      "type": "n8n-nodes-base.telegramTrigger",
      "position": [
        -6304,
        -1280
      ],
      "webhookId": "2bfa7dd9-c834-477f-ae6b-62deb1714965",
      "typeVersion": 1.1,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "bot_log",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "User Chat ID",
              "lookupValue": "={{ $json[\"User Chat ID\"] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -5232,
        -1632
      ],
      "id": "5fda5879-e8d9-4128-a542-061764eea1b2",
      "name": "Get bot_log",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "User Chat ID",
              "lookupValue": "={{ String($json[\"User Chat ID\"] || \"\") }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2912,
        -1968
      ],
      "id": "c568ed31-b63f-4d53-b097-7897295b8f4e",
      "name": "read_user_wallet_for_top",
      "alwaysOutputData": true,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "/**\n * Translator Node (HubAggregatorBot)\n * - locales: uk, en, ru, de, es\n * - getLang() ‚Üí –Ω–æ—Ä–º–∞–ª—ñ–∑—É—î Trigger.language_code + —Ä—É—á–Ω—ñ –æ–≤–µ—Ä—Ä–∞–π–¥–∏\n * - t(lang, key, vars) ‚Üí –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î {{placeholders}}\n * - msgKey/msgVars ‚Üí out.text\n */\n\nconst locales = {\n  uk: {\n    info_main:\n      'üëã –¶–µ HubAggregatorBot ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à–∏—Ö Telegram-–º—ñ–Ω—ñ-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ —Ç–∞ –±–æ—Ç—ñ–≤ –¥–ª—è –∑–∞—Ä–æ–±—ñ—Ç–∫—É –∑—ñ—Ä–æ–∫ —ñ TON.\\n\\n' +\n      '–¢—É—Ç —Ç–∏ –º–æ–∂–µ—à:\\n' +\n      '‚Ä¢ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –ø–∞—Ä—Ç–Ω–µ—Ä–∫–∏\\n' +\n      '‚Ä¢ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ TOP-–ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤\\n' +\n      '‚Ä¢ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —Å–≤—ñ–π –∑–∞—Ä–æ–±—ñ—Ç–æ–∫\\n' +\n      '‚Ä¢ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ 7% –æ—Ñ—ñ—Ü—ñ–π–Ω–æ—ó –ø–∞—Ä—Ç–Ω–µ—Ä–∫–∏ Telegram\\n\\n' +\n      '–ü–æ—á–Ω–∏ –∑ –∫–æ–º–∞–Ω–¥–∏ /partners –∞–±–æ –≤—ñ–¥–∫—Ä–∏–π /earnings, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å.',\n\n    wallet_saved: '‚úÖ <b>–ê–¥—Ä–µ—Å—É –∑–±–µ—Ä–µ–∂–µ–Ω–æ!</b>\\n–í–∏ –º–æ–∂–µ—Ç–µ —ó—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –Ω–∞—Ä–∞—Ö—É–≤–∞–Ω—å.',\n    wallet_invalid_format:\n      'üß† –Ø–∫—â–æ –≤–∏ –Ω–∞–º–∞–≥–∞—î—Ç–µ—Å—å –≤–≤–µ—Å—Ç–∏ –∞–¥—Ä–µ—Å—É TON-–≥–∞–º–∞–Ω—Ü—è ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç. –ê —è–∫—â–æ –Ω—ñ ‚Äî —Å–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ—é /info.',\n    wallet_not_found:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å —â–µ –Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –∞–¥—Ä–µ—Å—É TON-–≥–∞–º–∞–Ω—Ü—è</b>\\n\\n' +\n      'üßæ –Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏: –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –±—É–¥—å-—è–∫–∏–π TON-–≥–∞–º–∞–Ω–µ—Ü—å, —Å–∫–æ–ø—ñ—é–π—Ç–µ –∞–¥—Ä–µ—Å—É —ñ –Ω–∞–¥—ñ—à–ª—ñ—Ç—å —ó—ó —Å—é–¥–∏.',\n\n    // üîπ –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –≥–∞–º–∞–Ω—Ü–µ–º (–¥–æ–≤–≥–∞)\n    wallet_help:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å —â–µ –Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –∞–¥—Ä–µ—Å—É TON-–≥–∞–º–∞–Ω—Ü—è</b>\\n\\n' +\n      'üßæ <b>–Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ –∞–¥—Ä–µ—Å—É TON-–≥–∞–º–∞–Ω—Ü—è:</b>\\n\\n' +\n      '1Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∞–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –æ–¥–∏–Ω —ñ–∑ –≥–∞–º–∞–Ω—Ü—ñ–≤:\\n\\n' +\n      '‚Ä¢ <a href=\"https://t.me/wallet\">@wallet</a> ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π TON-–≥–∞–º–∞–Ω–µ—Ü—å —É Telegram\\n' +\n      '‚Ä¢ <a href=\"https://tonkeeper.com\">Tonkeeper</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://tonhub.com\">Tonhub</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://t.me/tonkeeper\">@tonkeeper</a> ‚Äî –≥–∞–º–∞–Ω–µ—Ü—å —É Telegram\\n\\n' +\n      '2Ô∏è‚É£ –°–∫–æ–ø—ñ—é–π—Ç–µ –∞–¥—Ä–µ—Å—É –≥–∞–º–∞–Ω—Ü—è (–≤–∏–≥–ª—è–¥–∞—î –ø—Ä–∏–±–ª–∏–∑–Ω–æ —Ç–∞–∫):\\n' +\n      '<code>EQCwz3GkW9hkGkB3Dxvkdsi8IzUxxxxxxxxxxxxxxxxxxxxxxx</code>\\n\\n' +\n      '3Ô∏è‚É£ –ù–∞–¥—ñ—à–ª—ñ—Ç—å —Ü—é –∞–¥—Ä–µ—Å—É —Å—é–¥–∏ –≤ —á–∞—Ç üì©\\n\\n' +\n      '‚úÖ –í–∞–ª—ñ–¥–Ω—É –∞–¥—Ä–µ—Å—É –±—É–¥–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ\\n' +\n      '‚ùóÔ∏è –Ø–∫—â–æ —â–æ—Å—å –Ω–µ —Ç–∞–∫ ‚Äî –±–æ—Ç –Ω–∞–¥—ñ—à–ª–µ –ø—ñ–¥–∫–∞–∑–∫—É',\n\n    // üîπ Format_Wallet_Info\n    wallet_info_empty: 'üòê –ü–æ–∫–∏ —â–æ –≤ —Ç–µ–±–µ –Ω–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–æ–≥–æ TON-–≥–∞–º–∞–Ω—Ü—è.',\n    wallet_info_saved: 'üëõ –¢–≤—ñ–π TON-–≥–∞–º–∞–Ω–µ—Ü—å:\\n<code>{{wallet}}</code>',\n    wallet_info_earnings: 'üí∏ –ù–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ: <b>{{amount}}</b> TON',\n    wallet_buy_stars_hint: '‚≠ê –•–æ—á–µ—à –±—ñ–ª—å—à–µ –∑—ñ—Ä–æ–∫? –ö—É–ø–∏ —ó—Ö –Ω–∞–ø—Ä—è–º—É –≤ Telegram.',\n    btn_buy_stars: '‚≠ê –ö—É–ø–∏—Ç–∏ –∑—ñ—Ä–∫–∏',\n\n    welcome:\n      'üëã –ü—Ä–∏–≤—ñ—Ç! –¶–µ HubAggregatorBot ‚Äî —Ç–≤—ñ–π –≥—ñ–¥ –ø–æ Telegram-–±–æ—Ç–∞—Ö, —è–∫—ñ –¥–∞—é—Ç—å –∑—ñ—Ä–∫–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å ‚≠ê\\n\\n' +\n      'üéØ –¢—É—Ç —Ç–∏ –º–æ–∂–µ—à:\\n' +\n      '‚Ä¢ –ó–∞–ø—É—Å–∫–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ –±–æ—Ç–∏ —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑—ñ—Ä–∫–∏ –∑–∞ –¥—ñ—ó\\n' +\n      '‚Ä¢ –ó–∞–ø—Ä–æ—à—É–≤–∞—Ç–∏ –¥—Ä—É–∑—ñ–≤ —ñ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –Ω–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ\\n' +\n      '‚Ä¢ –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å —ñ –ø—Ä–æ–∫–∞—á—É–≤–∞—Ç–∏—Å—å\\n\\n' +\n      'üí∏ –ó—ñ—Ä–∫–∏ ‚Äî —Ü–µ —à–ª—è—Ö –¥–æ –Ω–æ–≤–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π, —Ä—ñ–≤–Ω—ñ–≤ —ñ –Ω–∞–≤—ñ—Ç—å –¥–æ TON-–±–æ–Ω—É—Å—ñ–≤ üòé\\n' +\n      '–ß–∏–º –±—ñ–ª—å—à–µ –¥—ñ–π ‚Äî —Ç–∏–º –±—ñ–ª—å—à–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è\\n\\n' +\n      'üöÄ –ù–µ –∑–≤–æ–ª—ñ–∫–∞–π ‚Äî –Ω–∞—Ç–∏—Å–Ω–∏ /partners —ñ –ø–æ—á–Ω–∏ –∑–∞—Ä–æ–±–ª—è—Ç–∏ –∑—ñ—Ä–∫–∏ –≤–∂–µ –∑–∞—Ä–∞–∑!',\n    unlock_top_paid: 'üí´ –í—ñ–¥–∫—Ä–∏—Ç–∏ TOP –∑–∞ {{buy_top_price}}‚≠ê',\n    top_unlocked:\n      'üí´ TOP –¥–æ—Å—Ç—É–ø –≤—ñ–¥–∫—Ä–∏—Ç–æ!\\n\\n–¢–∏ —É—Å–ø—ñ—à–Ω–æ —Ä–æ–∑–±–ª–æ–∫—É–≤–∞–≤ TOP. –¢–∏—Å–Ω–∏ /top, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—ñ –±–æ—Ç–∏.',\n    buy_top_title: '–í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ TOP',\n    buy_top_description: 'üí´ –ú–∏—Ç—Ç—î–≤–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Ä–æ–∑–¥—ñ–ª—É TOP',\n    buy_top_label: 'TOP –¥–æ—Å—Ç—É–ø',\n    buy_top_price: 1,\n    no_wallet_referral:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å —â–µ –Ω–µ –¥–æ–¥–∞–Ω–æ TON-–≥–∞–º–∞–Ω–µ—Ü—å.</b>\\n\\n' +\n      '–ü—Ä–æ—Ç–µ –≤–∏ –≤–∂–µ –º–æ–∂–µ—Ç–µ –¥—ñ–ª–∏—Ç–∏—Å—å —Å–≤–æ—ó–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º üëá\\n[[referralLink]]\\n\\n' +\n      '–î–æ–¥–∞–π—Ç–µ –≥–∞–º–∞–Ω–µ—Ü—å —á–µ—Ä–µ–∑ <b>/wallet</b>, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤–∏–Ω–∞–≥–æ—Ä–æ–¥—É –∑–∞ –¥—Ä—É–∑—ñ–≤ üí∞',\n    share_referral:\n      'üöÄ –î–æ–ª—É—á–∞–π—Å—è –¥–æ HubAggregatorBot ‚Äî –æ—Ç—Ä–∏–º—É–π –∑—ñ—Ä–∫–∏ –∑–∞ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å!\\n–û—Å—å —Ç–≤–æ—î —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:\\n[[referralLink]]',\n    share_button: 'üß° –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å –ª—ñ–Ω–∫–æ—é',\n\n    // üî• Earnings Center (UA)\n    earnings_title: 'üî• Earnings Center\\n—Ç–≤—ñ–π –ø—Ä–æ–≥—Ä–µ—Å, TOP —Ç–∞ –∑–∞—Ä–æ–±—ñ—Ç–æ–∫ 7%',\n    earnings_no_income: 'üòê –ü–æ–∫–∏ —â–æ –≤ —Ç–µ–±–µ –Ω–µ–º–∞—î –∑–∞—Ä–æ–±—ñ—Ç–∫—É‚Ä¶',\n    earnings_has_income: 'üëõ –ì–∞–º–∞–Ω–µ—Ü—å: {{wallet}}\\nüåü –ó–∞—Ä–æ–±–ª–µ–Ω–æ: {{earned}} TON',\n\n    earnings_block1_title: '‚≠ê 1) –í—ñ–¥–∫—Ä–∏–π TOP ‚Äî x3‚Äìx7 –±—ñ–ª—å—à–µ –∑—ñ—Ä–æ–∫',\n    earnings_block1_line1: 'TOP –≤—ñ–¥–∫—Ä–∏–≤–∞—î –Ω–∞–π–≤–∏–≥—ñ–¥–Ω—ñ—à—ñ –º—ñ–Ω—ñ-–∞–ø–ø–∏:',\n    earnings_block1_benefit1: '‚Ä¢ –±—ñ–ª—å—à–µ –Ω–∞–≥–æ—Ä–æ–¥',\n    earnings_block1_benefit2: '‚Ä¢ —à–≤–∏–¥—à–∏–π –ø—Ä–æ–≥—Ä–µ—Å',\n    earnings_block1_benefit3: '‚Ä¢ –≤–∏—â—ñ –≤–∏–ø–ª–∞—Ç–∏',\n\n    earnings_block2_title: 'üí∏ 2) –¢–≤–æ—ó 7% –≤—ñ–¥ Telegram ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∞',\n    earnings_block2_how_it_works:\n      '–ö–æ–ª–∏ –ª—é–¥–∏ –∑–∞—Ö–æ–¥—è—Ç—å —á–µ—Ä–µ–∑ —Ç–≤–æ—é –ª—ñ–Ω–∫—É, –∑–∞–ø—É—Å–∫–∞—é—Ç—å HubAggregatorBot —ñ –∫—É–ø—É—é—Ç—å ‚≠ê ‚Äî Telegram –¥—ñ–ª–∏—Ç—å—Å—è –∑ —Ç–æ–±–æ—é –¥–æ—Ö–æ–¥–æ–º (~7%).',\n    earnings_block2_examples:\n      'üìå –°–∫—ñ–ª—å–∫–∏ –º–æ–∂–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç–∏ –æ–¥–∏–Ω —é–∑–µ—Ä:\\n' +\n      '‚Ä¢ 1 —é–∑–µ—Ä ‚Üí ~0.35‚Äì0.70‚Ç¨\\n' +\n      '‚Ä¢ 10 —é–∑–µ—Ä—ñ–≤ ‚Üí ~3.5‚Äì7‚Ç¨\\n' +\n      '‚Ä¢ 100 —é–∑–µ—Ä—ñ–≤ ‚Üí ~35‚Äì70‚Ç¨',\n\n    earnings_enable_7_title: '–Ø–∫ —É–≤—ñ–º–∫–Ω—É—Ç–∏ 7% (1 —Ä–∞–∑ –Ω–∞–∑–∞–≤–∂–¥–∏):',\n    earnings_enable_7_steps:\n      '1Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π @HubAggregatorBot\\n' +\n      '2Ô∏è‚É£ ¬´–ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∞¬ª\\n' +\n      '3Ô∏è‚É£ ¬´–ü—ñ–¥‚Äô—î–¥–Ω–∞—Ç–∏—Å—å¬ª\\n' +\n      '‚Üí 7% –∞–∫—Ç–∏–≤—É—é—Ç—å—Å—è –Ω–∞–∑–∞–≤–∂–¥–∏',\n\n    // üîπ –ù–û–í–ï: –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –æ–∫—Ä–µ–º–æ–≥–æ –µ–∫—Ä–∞–Ω—É\n    earnings_7_instructions:\n      'üí∏ –Ø–∫ —É–≤—ñ–º–∫–Ω—É—Ç–∏ 7% (1 —Ä–∞–∑ –Ω–∞–∑–∞–≤–∂–¥–∏):\\n\\n' +\n      '1Ô∏è‚É£ –í—ñ–¥–∫—Ä–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –±–æ—Ç–∞ @HubAggregatorBot (–Ω–∞—Ç–∏—Å–Ω–∏ –Ω–∞ –Ω–∞–∑–≤—É –±–æ—Ç–∞ –∑–≤–µ—Ä—Ö—É –≤ —á–∞—Ç—ñ)\\n' +\n      '2Ô∏è‚É£ –û–±–µ—Ä–∏ ¬´–ü–∞—Ä—Ç–Ω–µ—Ä—Å—å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∞¬ª\\n' +\n      '3Ô∏è‚É£ –ù–∞—Ç–∏—Å–Ω–∏ ¬´–ü—ñ–¥‚Äô—î–¥–Ω–∞—Ç–∏—Å—å¬ª\\n\\n' +\n      '–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ:\\n' +\n      '‚úîÔ∏è 7% –¥—ñ—é—Ç—å –Ω–∞–∑–∞–≤–∂–¥–∏\\n' +\n      '‚úîÔ∏è Telegram –ø–æ–∫–∞–∂–µ —Ç–≤–æ—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É –ª—ñ–Ω–∫—É\\n' +\n      '‚úîÔ∏è –°–∫–æ–ø—ñ—é–π —ó—ó –π –Ω–∞–¥—ñ—à–ª–∏ –¥—Ä—É–∑—è–º ‚Äî –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏–º–µ—à 7% –∑ —ó—Ö–Ω—ñ—Ö –≤–∏—Ç—Ä–∞—Ç',\n\n    earnings_block3_title: 'üöÄ 3) –©–æ –∑—Ä–æ–±–∏—Ç–∏ –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑',\n    earnings_step1_locked: '1Ô∏è‚É£ –î–æ–¥–∞–π —â–µ {{needed}} –¥—Ä—É–≥–∞(—ñ–≤) ‚Üí TOP –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è',\n    earnings_step1_open: '1Ô∏è‚É£ TOP —É–∂–µ –≤—ñ–¥–∫—Ä–∏—Ç–∏–π ‚Äî –∑–∞–ø—É—Å—Ç–∏ TOP-–ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤',\n    earnings_step2: '2Ô∏è‚É£ –ê–∫—Ç–∏–≤—É–π —Å–≤–æ—ó 7%',\n    earnings_step3:\n      '3Ô∏è‚É£ –ö–∏–Ω—å —Ü—é –ª—ñ–Ω–∫—É –≤ 1‚Äì2 ¬´–∂–∏–≤—ñ¬ª —á–∞—Ç–∏ –∞–±–æ –¥—Ä—É–≥—É, —è–∫–æ–º—É —Ü–µ –∑–∞–π–¥–µ ‚Äî –∫–æ–∂–µ–Ω —é–∑–µ—Ä –º–æ–∂–µ –ø—Ä–∏–Ω–æ—Å–∏—Ç–∏ —Ç–æ–±—ñ ‚Ç¨ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ',\n    earnings_step4: '4Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–π TOP-–ø–∞—Ä—Ç–Ω–µ—Ä—ñ–≤',\n    earnings_auto_stats: '‚Üí –¥–æ—Ö–æ–¥–∏ —ñ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑‚Äô—è–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ',\n\n    earnings_btn_unlock_top: 'üíé –í—ñ–¥–∫—Ä–∏—Ç–∏ TOP –∑–∞ {{buy_top_price}}‚≠ê',\n    earnings_btn_top_partners: '‚≠ê TOP-–ø–∞—Ä—Ç–Ω–µ—Ä–∏',\n    earnings_btn_activate_7: 'üí∞ –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ 7%',\n    // üîΩ –ö–Ω–æ–ø–∫–∏ –¥–ª—è /partners\n    partners_btn_top_partners: '‚≠ê TOP-–ø–∞—Ä—Ç–Ω–µ—Ä–∏',\n    partners_btn_earnings: 'üí∏ –ó–∞—Ä–æ–±—ñ—Ç–æ–∫',\n  },\n\n  en: {\n    info_main:\n      'üëã This is HubAggregatorBot ‚Äî an aggregator of the most profitable Telegram mini apps and bots to earn Stars and TON.\\n\\n' +\n      'Here you can:\\n' +\n      '‚Ä¢ find vetted partner programs\\n' +\n      '‚Ä¢ unlock TOP partners\\n' +\n      '‚Ä¢ track your earnings\\n' +\n      '‚Ä¢ enable Telegram‚Äôs official 7% revenue share\\n\\n' +\n      'Start with /partners or open /earnings to see your progress.',\n\n    wallet_saved: '‚úÖ <b>Address saved!</b>\\nYou can use it to receive payouts.',\n    wallet_invalid_format:\n      'üß† If you are trying to enter a TON wallet address ‚Äî please check the format. If not, use the /info command.',\n    wallet_not_found:\n      '‚ö†Ô∏è <b>You don\\'t have a saved TON wallet address yet</b>\\n\\n' +\n      'üßæ How to save: open any TON wallet, copy your address and send it here.',\n    wallet_help:\n      '‚ö†Ô∏è <b>You don\\'t have a saved TON wallet address yet</b>\\n\\n' +\n      'üßæ <b>How to save your TON wallet address:</b>\\n\\n' +\n      '1Ô∏è‚É£ Install or open a wallet:\\n\\n' +\n      '‚Ä¢ <a href=\"https://t.me/wallet\">@wallet</a> ‚Äî official TON wallet bot in Telegram\\n' +\n      '‚Ä¢ <a href=\"https://tonkeeper.com\">Tonkeeper</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://tonhub.com\">Tonhub</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://t.me/tonkeeper\">@tonkeeper</a> ‚Äî Telegram wallet\\n\\n' +\n      '2Ô∏è‚É£ Copy your wallet address (it looks like this):\\n' +\n      '<code>EQCwz3GkW9hkGkB3Dxvkdsi8IzUxxxxxxxxxxxxxxxxxxxxxxx</code>\\n\\n' +\n      '3Ô∏è‚É£ Send it here in chat üì©\\n\\n' +\n      '‚úÖ The valid address will be saved automatically\\n' +\n      '‚ùóÔ∏è If something‚Äôs wrong, the bot will guide you',\n\n    // üîπ Format_Wallet_Info\n    wallet_info_empty: 'üòê You don‚Äôt have a saved TON wallet yet.',\n    wallet_info_saved: 'üëõ Your TON wallet:\\n<code>{{wallet}}</code>',\n    wallet_info_earnings: 'üí∏ Earned: <b>{{amount}}</b> TON',\n    wallet_buy_stars_hint: '‚≠ê Want more stars? Buy them directly in Telegram.',\n    btn_buy_stars: '‚≠ê Buy Stars',\n\n    welcome:\n      'üëã Hey! This is HubAggregatorBot ‚Äî your guide to Telegram bots that give you Stars for activity ‚≠ê\\n\\n' +\n      'üéØ Here you can:\\n' +\n      '‚Ä¢ Launch verified bots and earn Stars for your actions\\n' +\n      '‚Ä¢ Invite friends and unlock new opportunities\\n' +\n      '‚Ä¢ Track your progress and level up\\n\\n' +\n      'üí∏ Stars are your path to new features, levels and even TON bonuses üòé\\n' +\n      'The more you do ‚Äî the more you unlock\\n\\n' +\n      'üöÄ Don\\'t wait ‚Äî tap /partners and start earning Stars right now!',\n    unlock_top_paid: 'üí´ Unlock TOP for {{buy_top_price}}‚≠ê',\n    top_unlocked:\n      'üí´ TOP access unlocked!\\n\\nYou successfully unlocked TOP. Tap /top to see the most profitable bots.',\n    buy_top_title: 'Unlock TOP Access',\n    buy_top_description: 'üí´ Instant access to the TOP section',\n    buy_top_label: 'TOP Access',\n    buy_top_price: 1,\n    no_wallet_referral:\n      '‚ö†Ô∏è <b>You haven\\'t added a TON wallet yet.</b>\\n\\n' +\n      'But you can already share your personal link üëá\\n[[referralLink]]\\n\\n' +\n      'Add a wallet via <b>/wallet</b> to receive rewards for your friends üí∞',\n    share_referral:\n      'üöÄ Join HubAggregatorBot ‚Äî earn Stars for your activity!\\nHere is your referral link:\\n[[referralLink]]',\n    share_button: 'üß° Share the link',\n\n    // üî• Earnings Center (EN)\n    earnings_title: 'üî• Earnings Center\\nyour progress, TOP and 7% earnings',\n    earnings_no_income: 'üòê You don\\'t have any earnings yet‚Ä¶',\n    earnings_has_income: 'üëõ Wallet: {{wallet}}\\nüåü Earned: {{earned}} TON',\n\n    earnings_block1_title: '‚≠ê 1) Open TOP ‚Äî x3‚Äìx7 more Stars',\n    earnings_block1_line1: 'TOP unlocks the most profitable mini apps:',\n    earnings_block1_benefit1: '‚Ä¢ more rewards',\n    earnings_block1_benefit2: '‚Ä¢ faster progress',\n    earnings_block1_benefit3: '‚Ä¢ higher payouts',\n\n    earnings_block2_title: 'üí∏ 2) Your 7% from Telegram ‚Äî official partner program',\n    earnings_block2_how_it_works:\n      'When people join via your link, launch HubAggregatorBot and buy ‚≠ê, Telegram shares ~7% of the revenue with you.',\n    earnings_block2_examples:\n      'üìå How much one user can bring:\\n' +\n      '‚Ä¢ 1 user ‚Üí ~0.35‚Äì0.70‚Ç¨\\n' +\n      '‚Ä¢ 10 users ‚Üí ~3.5‚Äì7‚Ç¨\\n' +\n      '‚Ä¢ 100 users ‚Üí ~35‚Äì70‚Ç¨',\n\n    earnings_enable_7_title: 'How to enable 7% (once, forever):',\n    earnings_enable_7_steps:\n      '1Ô∏è‚É£ Open @HubAggregatorBot\\n' +\n      '2Ô∏è‚É£ ‚ÄúPartner Program‚Äù\\n' +\n      '3Ô∏è‚É£ ‚ÄúJoin‚Äù\\n' +\n      '‚Üí 7% stay active forever',\n\n    // üîπ NEW detailed instructions\n    earnings_7_instructions:\n      'üí∏ How to enable 7% (once, forever):\\n\\n' +\n      '1Ô∏è‚É£ Open the bot profile @HubAggregatorBot (tap the bot name at the top of the chat)\\n' +\n      '2Ô∏è‚É£ Tap ‚ÄúPartner Program‚Äù\\n' +\n      '3Ô∏è‚É£ Tap ‚ÄúJoin‚Äù\\n\\n' +\n      'After that:\\n' +\n      '‚úîÔ∏è 7% stay active forever\\n' +\n      '‚úîÔ∏è Telegram will show your personal referral link\\n' +\n      '‚úîÔ∏è Copy it and send it to friends ‚Äî you earn 7% from their Stars purchases',\n\n    earnings_block3_title: 'üöÄ 3) What to do right now',\n    earnings_step1_locked: '1Ô∏è‚É£ Invite {{needed}} more friend(s) ‚Üí TOP will open',\n    earnings_step1_open: '1Ô∏è‚É£ TOP is already open ‚Äî start TOP partners',\n    earnings_step2: '2Ô∏è‚É£ Activate your 7%',\n    earnings_step3:\n      '3Ô∏è‚É£ Drop this link into 1‚Äì2 active chats or to a friend who might like it ‚Äî each user can bring you ‚Ç¨ automatically',\n    earnings_step4: '4Ô∏è‚É£ Launch TOP partners',\n    earnings_auto_stats: '‚Üí earnings and stats will appear automatically',\n\n    earnings_btn_unlock_top: 'üíé Unlock TOP for {{buy_top_price}}‚≠ê',\n    earnings_btn_top_partners: '‚≠ê TOP partners',\n    earnings_btn_activate_7: 'üí∞ Activate 7%',\n    // üîΩ Buttons for /partners\n    partners_btn_top_partners: '‚≠ê TOP partners',\n    partners_btn_earnings: 'üí∏ Earnings',\n  },\n\n  ru: {\n    info_main:\n      'üëã –≠—Ç–æ HubAggregatorBot ‚Äî –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä —Å–∞–º—ã—Ö –≤—ã–≥–æ–¥–Ω—ã—Ö Telegram-–º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –±–æ—Ç–æ–≤ –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞ –∑–≤—ë–∑–¥ –∏ TON.\\n\\n' +\n      '–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å:\\n' +\n      '‚Ä¢ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã\\n' +\n      '‚Ä¢ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å TOP-–ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤\\n' +\n      '‚Ä¢ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫\\n' +\n      '‚Ä¢ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ 7% –ø–∞—Ä—Ç–Ω—ë—Ä–∫–∏ Telegram\\n\\n' +\n      '–ù–∞—á–Ω–∏ —Å –∫–æ–º–∞–Ω–¥—ã /partners –∏–ª–∏ –æ—Ç–∫—Ä–æ–π /earnings, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å.',\n\n    wallet_saved: '‚úÖ <b>–ê–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!</b>\\n–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π.',\n    wallet_invalid_format:\n      'üß† –ï—Å–ª–∏ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –≤–≤–µ—Å—Ç–∏ –∞–¥—Ä–µ—Å TON-–∫–æ—à–µ–ª—å–∫–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π /info.',\n    wallet_not_found:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å –µ—â—ë –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ TON-–∫–æ—à–µ–ª—å–∫–∞</b>\\n\\n' +\n      'üßæ –ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å: –æ—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π TON-–∫–æ—à–µ–ª—ë–∫, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ —Å—é–¥–∞.',\n    wallet_help:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å –µ—â—ë –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞ TON-–∫–æ—à–µ–ª—å–∫–∞</b>\\n\\n' +\n      'üßæ <b>–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–¥—Ä–µ—Å TON-–∫–æ—à–µ–ª—å–∫–∞:</b>\\n\\n' +\n      '1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –æ–¥–∏–Ω –∏–∑ –∫–æ—à–µ–ª—å–∫–æ–≤:\\n\\n' +\n      '‚Ä¢ <a href=\"https://t.me/wallet\">@wallet</a> ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π TON-–∫–æ—à–µ–ª—ë–∫ –≤ Telegram\\n' +\n      '‚Ä¢ <a href=\"https://tonkeeper.com\">Tonkeeper</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://tonhub.com\">Tonhub</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://t.me/tonkeeper\">@tonkeeper</a> ‚Äî –∫–æ—à–µ–ª—ë–∫ –≤–Ω—É—Ç—Ä–∏ Telegram\\n\\n' +\n      '2Ô∏è‚É£ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ (–≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫):\\n' +\n      '<code>EQCwz3GkW9hkGkB3Dxvkdsi8IzUxxxxxxxxxxxxxxxxxxxxxxx</code>\\n\\n' +\n      '3Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å —Å—é–¥–∞ –≤ —á–∞—Ç üì©\\n\\n' +\n      '‚úÖ –í–∞–ª–∏–¥–Ω—ã–π –∞–¥—Ä–µ—Å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\\n' +\n      '‚ùóÔ∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫ ‚Äî –±–æ—Ç –ø–æ–¥—Å–∫–∞–∂–µ—Ç, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å',\n\n    // üîπ Format_Wallet_Info\n    wallet_info_empty: 'üòê –£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–≥–æ TON-–∫–æ—à–µ–ª—å–∫–∞.',\n    wallet_info_saved: 'üëõ –¢–≤–æ–π TON-–∫–æ—à–µ–ª—ë–∫:\\n<code>{{wallet}}</code>',\n    wallet_info_earnings: 'üí∏ –ù–∞—á–∏—Å–ª–µ–Ω–æ: <b>{{amount}}</b> TON',\n    wallet_buy_stars_hint: '‚≠ê –•–æ—á–µ—à—å –±–æ–ª—å—à–µ –∑–≤—ë–∑–¥? –ö—É–ø–∏ –∏—Ö –Ω–∞–ø—Ä—è–º—É—é –≤ Telegram.',\n    btn_buy_stars: '‚≠ê –ö—É–ø–∏—Ç—å –∑–≤—ë–∑–¥—ã',\n\n    welcome:\n      'üëã –ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ HubAggregatorBot ‚Äî —Ç–≤–æ–π –≥–∏–¥ –ø–æ Telegram-–±–æ—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç –∑–≤—ë–∑–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚≠ê\\n\\n' +\n      'üéØ –ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å:\\n' +\n      '‚Ä¢ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –±–æ—Ç—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –∑–≤—ë–∑–¥—ã –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è\\n' +\n      '‚Ä¢ –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π –∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\\n' +\n      '‚Ä¢ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø—Ä–æ–∫–∞—á–∏–≤–∞—Ç—å—Å—è\\n\\n' +\n      'üí∏ –ó–≤—ë–∑–¥—ã ‚Äî —ç—Ç–æ –ø—É—Ç—å –∫ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º, —É—Ä–æ–≤–Ω—è–º –∏ –¥–∞–∂–µ TON-–±–æ–Ω—É—Å–∞–º üòé\\n' +\n      '–ß–µ–º –±–æ–ª—å—à–µ –¥–µ–π—Å—Ç–≤–∏–π ‚Äî —Ç–µ–º –±–æ–ª—å—à–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è\\n\\n' +\n      'üöÄ –ù–µ —Ç—è–Ω–∏ ‚Äî –Ω–∞–∂–º–∏ /partners –∏ –Ω–∞—á–Ω–∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–≤—ë–∑–¥—ã —É–∂–µ —Å–µ–π—á–∞—Å!',\n    unlock_top_paid: 'üí´ –û—Ç–∫—Ä—ã—Ç—å TOP –∑–∞ {{buy_top_price}}‚≠ê',\n    top_unlocked:\n      'üí´ –î–æ—Å—Ç—É–ø –∫ TOP –æ—Ç–∫—Ä—ã—Ç!\\n\\n–¢—ã —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª TOP. –ù–∞–∂–º–∏ /top, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–∞–º—ã–µ –≤—ã–≥–æ–¥–Ω—ã–µ –±–æ—Ç—ã.',\n    buy_top_title: '–û—Ç–∫—Ä—ã—Ç—å –¥–æ—Å—Ç—É–ø –∫ TOP',\n    buy_top_description: 'üí´ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–¥–µ–ª—É TOP',\n    buy_top_label: '–î–æ—Å—Ç—É–ø –∫ TOP',\n    buy_top_price: 1,\n    no_wallet_referral:\n      '‚ö†Ô∏è <b>–£ –≤–∞—Å –µ—â—ë –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω TON-–∫–æ—à–µ–ª—ë–∫.</b>\\n\\n' +\n      '–ù–æ –≤—ã —É–∂–µ –º–æ–∂–µ—Ç–µ –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–µ–π —Å—Å—ã–ª–∫–æ–π üëá\\n[[referralLink]]\\n\\n' +\n      '–î–æ–±–∞–≤—å—Ç–µ –∫–æ—à–µ–ª—ë–∫ —á–µ—Ä–µ–∑ <b>/wallet</b>, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –∑–∞ –¥—Ä—É–∑–µ–π üí∞',\n    share_referral:\n      'üöÄ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ HubAggregatorBot ‚Äî –ø–æ–ª—É—á–∞–π –∑–≤—ë–∑–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å!\\n–í–æ—Ç —Ç–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:\\n[[referralLink]]',\n    share_button: 'üß° –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π',\n\n    // üî• Earnings Center (RU)\n    earnings_title: 'üî• Earnings Center\\n—Ç–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å, TOP –∏ –∑–∞—Ä–∞–±–æ—Ç–æ–∫ 7%',\n    earnings_no_income: 'üòê –£ —Ç–µ–±—è –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–∫–∞‚Ä¶',\n    earnings_has_income: 'üëõ –ö–æ—à–µ–ª—ë–∫: {{wallet}}\\nüåü –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: {{earned}} TON',\n\n    earnings_block1_title: '‚≠ê 1) –û—Ç–∫—Ä–æ–π TOP ‚Äî x3‚Äìx7 –±–æ–ª—å—à–µ –∑–≤—ë–∑–¥',\n    earnings_block1_line1: 'TOP –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–∞–º—ã–µ –≤—ã–≥–æ–¥–Ω—ã–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:',\n    earnings_block1_benefit1: '‚Ä¢ –±–æ–ª—å—à–µ –Ω–∞–≥—Ä–∞–¥',\n    earnings_block1_benefit2: '‚Ä¢ –±—ã—Å—Ç—Ä–µ–µ –ø—Ä–æ–≥—Ä–µ—Å—Å',\n    earnings_block1_benefit3: '‚Ä¢ –≤—ã—à–µ –≤—ã–ø–ª–∞—Ç—ã',\n\n    earnings_block2_title: 'üí∏ 2) –¢–≤–æ–∏ 7% –æ—Ç Telegram ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞',\n    earnings_block2_how_it_works:\n      '–ö–æ–≥–¥–∞ –ª—é–¥–∏ –∑–∞—Ö–æ–¥—è—Ç –ø–æ —Ç–≤–æ–µ–π —Å—Å—ã–ª–∫–µ, –∑–∞–ø—É—Å–∫–∞—é—Ç HubAggregatorBot –∏ –ø–æ–∫—É–ø–∞—é—Ç ‚≠ê ‚Äî Telegram –¥–µ–ª–∏—Ç—Å—è —Å —Ç–æ–±–æ–π ~7% –¥–æ—Ö–æ–¥–∞.',\n    earnings_block2_examples:\n      'üìå –°–∫–æ–ª—å–∫–æ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:\\n' +\n      '‚Ä¢ 1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí ~0.35‚Äì0.70‚Ç¨\\n' +\n      '‚Ä¢ 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí ~3.5‚Äì7‚Ç¨\\n' +\n      '‚Ä¢ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Üí ~35‚Äì70‚Ç¨',\n\n    earnings_enable_7_title: '–ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å 7% (–æ–¥–∏–Ω —Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞):',\n    earnings_enable_7_steps:\n      '1Ô∏è‚É£ –û—Ç–∫—Ä–æ–π @HubAggregatorBot\\n' +\n      '2Ô∏è‚É£ ¬´–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞¬ª\\n' +\n      '3Ô∏è‚É£ ¬´–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è¬ª\\n' +\n      '‚Üí 7% –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞',\n\n    // üîπ –ù–û–í–û–ï: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è\n    earnings_7_instructions:\n      'üí∏ –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å 7% (–æ–¥–∏–Ω —Ä–∞–∑ –∏ –Ω–∞–≤—Å–µ–≥–¥–∞):\\n\\n' +\n      '1Ô∏è‚É£ –û—Ç–∫—Ä–æ–π –ø—Ä–æ—Ñ–∏–ª—å –±–æ—Ç–∞ @HubAggregatorBot (–Ω–∞–∂–º–∏ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –±–æ—Ç–∞ —Å–≤–µ—Ä—Ö—É –≤ —á–∞—Ç–µ)\\n' +\n      '2Ô∏è‚É£ –ù–∞–∂–º–∏ ¬´–ü–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞¬ª\\n' +\n      '3Ô∏è‚É£ –ù–∞–∂–º–∏ ¬´–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è¬ª\\n\\n' +\n      '–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:\\n' +\n      '‚úîÔ∏è 7% –±—É–¥—É—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Å–µ–≥–¥–∞\\n' +\n      '‚úîÔ∏è Telegram –ø–æ–∫–∞–∂–µ—Ç —Ç–≤–æ—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É\\n' +\n      '‚úîÔ∏è –°–∫–æ–ø–∏—Ä—É–π –µ—ë –∏ –æ—Ç–ø—Ä–∞–≤—å –¥—Ä—É–∑—å—è–º ‚Äî –±—É–¥–µ—à—å –ø–æ–ª—É—á–∞—Ç—å 7% —Å –∏—Ö –ø–æ–∫—É–ø–æ–∫ –∑–≤—ë–∑–¥',\n\n    earnings_block3_title: 'üöÄ 3) –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å',\n    earnings_step1_locked: '1Ô∏è‚É£ –ü—Ä–∏–≥–ª–∞—Å–∏ –µ—â—ë {{needed}} –¥—Ä—É–≥–∞(–æ–≤) ‚Üí TOP –æ—Ç–∫—Ä–æ–µ—Ç—Å—è',\n    earnings_step1_open: '1Ô∏è‚É£ TOP —É–∂–µ –æ—Ç–∫—Ä—ã—Ç ‚Äî –∑–∞–ø—É—Å—Ç–∏ TOP-–ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤',\n    earnings_step2: '2Ô∏è‚É£ –ê–∫—Ç–∏–≤–∏—Ä—É–π —Å–≤–æ–∏ 7%',\n    earnings_step3:\n      '3Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å —ç—Ç—É —Å—Å—ã–ª–∫—É –≤ 1‚Äì2 ¬´–∂–∏–≤—ã—Ö¬ª —á–∞—Ç–∞ –∏–ª–∏ –¥—Ä—É–≥—É, –∫–æ—Ç–æ—Ä–æ–º—É —ç—Ç–æ –∑–∞–π–¥—ë—Ç ‚Äî –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Ç–µ–±–µ ‚Ç¨ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏',\n    earnings_step4: '4Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–π TOP-–ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤',\n    earnings_auto_stats: '‚Üí –¥–æ—Ö–æ–¥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—è–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏',\n\n    earnings_btn_unlock_top: 'üíé –û—Ç–∫—Ä—ã—Ç—å TOP –∑–∞ {{buy_top_price}}‚≠ê',\n    earnings_btn_top_partners: '‚≠ê TOP-–ø–∞—Ä—Ç–Ω—ë—Ä—ã',\n    earnings_btn_activate_7: 'üí∞ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å 7%',\n    // üîΩ –ö–Ω–æ–ø–∫–∏ –¥–ª—è /partners\n    partners_btn_top_partners: '‚≠ê TOP-–ø–∞—Ä—Ç–Ω—ë—Ä—ã',\n    partners_btn_earnings: 'üí∏ –ó–∞—Ä–∞–±–æ—Ç–æ–∫',\n  },\n\n  de: {\n    info_main:\n      'üëã Das ist HubAggregatorBot ‚Äî ein Aggregator der profitabelsten Telegram-Mini-Apps und Bots, um Stars und TON zu verdienen.\\n\\n' +\n      'Hier kannst du:\\n' +\n      '‚Ä¢ gepr√ºfte Partnerprogramme finden\\n' +\n      '‚Ä¢ TOP-Partner freischalten\\n' +\n      '‚Ä¢ deine Einnahmen verfolgen\\n' +\n      '‚Ä¢ den offiziellen 7%-Revenue-Share von Telegram aktivieren\\n\\n' +\n      'Starte mit /partners oder √∂ffne /earnings, um deinen Fortschritt zu sehen.',\n\n    wallet_saved: '‚úÖ <b>Adresse gespeichert!</b>\\nDu kannst sie f√ºr Auszahlungen verwenden.',\n    wallet_invalid_format:\n      'üß† Wenn du eine TON-Wallet-Adresse eingeben m√∂chtest ‚Äì √ºberpr√ºfe das Format. Wenn nicht, nutze den /info-Befehl.',\n    wallet_not_found:\n      '‚ö†Ô∏è <b>Du hast noch keine TON-Wallet-Adresse gespeichert</b>\\n\\n' +\n      'üßæ So speicherst du sie: √ñffne eine TON-Wallet, kopiere die Adresse und sende sie hier.',\n    wallet_help:\n      '‚ö†Ô∏è <b>Du hast noch keine TON-Wallet-Adresse gespeichert</b>\\n\\n' +\n      'üßæ <b>So speicherst du deine TON-Wallet-Adresse:</b>\\n\\n' +\n      '1Ô∏è‚É£ Installiere oder √∂ffne eine Wallet:\\n\\n' +\n      '‚Ä¢ <a href=\"https://t.me/wallet\">@wallet</a> ‚Äî offizieller TON-Wallet-Bot in Telegram\\n' +\n      '‚Ä¢ <a href=\"https://tonkeeper.com\">Tonkeeper</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://tonhub.com\">Tonhub</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://t.me/tonkeeper\">@tonkeeper</a> ‚Äî Wallet direkt in Telegram\\n\\n' +\n      '2Ô∏è‚É£ Kopiere deine Wallet-Adresse (sieht ungef√§hr so aus):\\n' +\n      '<code>EQCwz3GkW9hkGkB3Dxvkdsi8IzUxxxxxxxxxxxxxxxxxxxxxxx</code>\\n\\n' +\n      '3Ô∏è‚É£ Sende diese Adresse hier in den Chat üì©\\n\\n' +\n      '‚úÖ Eine g√ºltige Adresse wird automatisch gespeichert\\n' +\n      '‚ùóÔ∏è Wenn etwas nicht stimmt, gibt dir der Bot Hinweise',\n\n    // üîπ Format_Wallet_Info\n    wallet_info_empty: 'üòê Du hast noch keine TON-Wallet gespeichert.',\n    wallet_info_saved: 'üëõ Deine TON-Wallet:\\n<code>{{wallet}}</code>',\n    wallet_info_earnings: 'üí∏ Gutgeschrieben: <b>{{amount}}</b> TON',\n    wallet_buy_stars_hint: '‚≠ê Du willst mehr Stars? Kauf sie direkt in Telegram.',\n    btn_buy_stars: '‚≠ê Stars kaufen',\n\n    welcome:\n      'üëã Hi! Das ist HubAggregatorBot ‚Äì dein Guide zu Telegram-Bots, die dir Stars f√ºr Aktionen geben ‚≠ê\\n\\n' +\n      'üéØ Hier kannst du:\\n' +\n      '‚Ä¢ gepr√ºfte Bots starten und Stars f√ºr deine Aktionen verdienen\\n' +\n      '‚Ä¢ Freunde einladen und neue M√∂glichkeiten freischalten\\n' +\n      '‚Ä¢ deinen Fortschritt verfolgen und dein Level steigern\\n\\n' +\n      'üí∏ Stars sind dein Weg zu neuen Funktionen, Levels und sogar TON-Boni üòé\\n' +\n      'Je mehr du tust, desto mehr wird freigeschaltet\\n\\n' +\n      'üöÄ Warte nicht l√§nger ‚Äì tippe auf /partners und beginne jetzt, Stars zu verdienen!',\n    unlock_top_paid: 'üí´ TOP freischalten f√ºr {{buy_top_price}}‚≠ê',\n    top_unlocked:\n      'üí´ TOP-Zugang freigeschaltet!\\n\\nDu hast TOP erfolgreich freigeschaltet. Tippe auf /top, um die profitabelsten Bots zu sehen.',\n    buy_top_title: 'TOP-Zugang freischalten',\n    buy_top_description: 'üí´ Sofortiger Zugang zum TOP-Bereich',\n    buy_top_label: 'TOP-Zugang',\n    buy_top_price: 1,\n    no_wallet_referral:\n      '‚ö†Ô∏è <b>Du hast noch keine TON-Wallet hinzugef√ºgt.</b>\\n\\n' +\n      'Du kannst deinen pers√∂nlichen Link aber schon teilen üëá\\n[[referralLink]]\\n\\n' +\n      'F√ºge deine Wallet √ºber <b>/wallet</b> hinzu, um Belohnungen f√ºr Freunde zu erhalten üí∞',\n    share_referral:\n      'üöÄ Tritt HubAggregatorBot bei ‚Äî sammle Stars f√ºr deine Aktivit√§t!\\nHier ist dein Empfehlungslink:\\n[[referralLink]]',\n    share_button: 'üß° Link teilen',\n\n    // üî• Earnings Center (DE)\n    earnings_title: 'üî• Earnings Center\\nDein Fortschritt, TOP und 7 % Einnahmen',\n    earnings_no_income: 'üòê Du hast noch keine Einnahmen‚Ä¶',\n    earnings_has_income: 'üëõ Wallet: {{wallet}}\\nüåü Verdient: {{earned}} TON',\n\n    earnings_block1_title: '‚≠ê 1) √ñffne TOP ‚Äî x3‚Äìx7 mehr Stars',\n    earnings_block1_line1: 'TOP √∂ffnet die profitabelsten Mini-Apps:',\n    earnings_block1_benefit1: '‚Ä¢ mehr Belohnungen',\n    earnings_block1_benefit2: '‚Ä¢ schnellerer Fortschritt',\n    earnings_block1_benefit3: '‚Ä¢ h√∂here Auszahlungen',\n\n    earnings_block2_title: 'üí∏ 2) Deine 7 % von Telegram ‚Äî offizielles Partnerprogramm',\n    earnings_block2_how_it_works:\n      'Wenn Leute √ºber deinen Link kommen, HubAggregatorBot starten und ‚≠ê kaufen, teilt Telegram ~7 % der Einnahmen mit dir.',\n    earnings_block2_examples:\n      'üìå Wie viel ein User bringen kann:\\n' +\n      '‚Ä¢ 1 User ‚Üí ~0,35‚Äì0,70‚Ç¨\\n' +\n      '‚Ä¢ 10 User ‚Üí ~3,5‚Äì7‚Ç¨\\n' +\n      '‚Ä¢ 100 User ‚Üí ~35‚Äì70‚Ç¨',\n\n    earnings_enable_7_title: 'So aktivierst du 7 % (einmal, f√ºr immer):',\n    earnings_enable_7_steps:\n      '1Ô∏è‚É£ √ñffne @HubAggregatorBot\\n' +\n      '2Ô∏è‚É£ ‚ÄûPartnerprogramm‚Äú\\n' +\n      '3Ô∏è‚É£ ‚ÄûBeitreten‚Äú\\n' +\n      '‚Üí 7 % bleiben dauerhaft aktiv',\n\n    // üîπ NEU: detaillierte Anleitung\n    earnings_7_instructions:\n      'üí∏ So aktivierst du 7 % (einmal, f√ºr immer):\\n\\n' +\n      '1Ô∏è‚É£ √ñffne das Bot-Profil @HubAggregatorBot (tippe oben im Chat auf den Bot-Namen)\\n' +\n      '2Ô∏è‚É£ Tippe auf ‚ÄûPartnerprogramm‚Äú\\n' +\n      '3Ô∏è‚É£ Tippe auf ‚ÄûBeitreten‚Äú\\n\\n' +\n      'Danach:\\n' +\n      '‚úîÔ∏è Die 7 % bleiben dauerhaft aktiv\\n' +\n      '‚úîÔ∏è Telegram zeigt dir deinen pers√∂nlichen Empfehlungslink\\n' +\n      '‚úîÔ∏è Kopiere ihn und schicke ihn an Freunde ‚Äì du erh√§ltst 7 % von ihren Stars-K√§ufen',\n\n    earnings_block3_title: 'üöÄ 3) Was du jetzt tun solltest',\n    earnings_step1_locked: '1Ô∏è‚É£ Lade noch {{needed}} Freund(e) ein ‚Üí TOP wird ge√∂ffnet',\n    earnings_step1_open: '1Ô∏è‚É£ TOP ist schon ge√∂ffnet ‚Äî starte die TOP-Partner',\n    earnings_step2: '2Ô∏è‚É£ Aktiviere deine 7 %',\n    earnings_step3:\n      '3Ô∏è‚É£ Teile diesen Link in 1‚Äì2 aktiven Chats oder mit einem Freund, den das interessieren k√∂nnte ‚Äî jeder User kann dir automatisch ‚Ç¨ bringen',\n    earnings_step4: '4Ô∏è‚É£ Starte die TOP-Partner',\n    earnings_auto_stats: '‚Üí Einnahmen und Statistiken erscheinen automatisch',\n\n    earnings_btn_unlock_top: 'üíé TOP freischalten f√ºr {{buy_top_price}}‚≠ê',\n    earnings_btn_top_partners: '‚≠ê TOP-Partner',\n    earnings_btn_activate_7: 'üí∞ 7 % aktivieren',\n    // üîΩ Buttons for /partners\n    partners_btn_top_partners: '‚≠ê TOP-Partner',\n    partners_btn_earnings: 'üí∏ Einnahmen',\n  },\n\n  es: {\n    info_main:\n      'üëã Este es HubAggregatorBot ‚Äî un agregador de las mini apps y bots de Telegram m√°s rentables para ganar Stars y TON.\\n\\n' +\n      'Aqu√≠ puedes:\\n' +\n      '‚Ä¢ encontrar programas de afiliados verificados\\n' +\n      '‚Ä¢ desbloquear socios TOP\\n' +\n      '‚Ä¢ seguir tus ganancias\\n' +\n      '‚Ä¢ activar el 7 % oficial de reparto de ingresos de Telegram\\n\\n' +\n      'Empieza con /partners o abre /earnings para ver tu progreso.',\n\n    wallet_saved: '‚úÖ <b>Direcci√≥n guardada.</b>\\nPuedes usarla para recibir pagos.',\n    wallet_invalid_format:\n      'üß† Si est√°s intentando introducir una direcci√≥n de monedero TON, comprueba el formato. Si no, usa el comando /info.',\n    wallet_not_found:\n      '‚ö†Ô∏è <b>A√∫n no tienes una direcci√≥n de monedero TON guardada</b>\\n\\n' +\n      'üßæ C√≥mo guardarla: abre cualquier monedero TON, copia la direcci√≥n y env√≠ala aqu√≠.',\n    wallet_help:\n      '‚ö†Ô∏è <b>A√∫n no tienes una direcci√≥n de monedero TON guardada</b>\\n\\n' +\n      'üßæ <b>C√≥mo guardar la direcci√≥n de tu monedero TON:</b>\\n\\n' +\n      '1Ô∏è‚É£ Instala o abre un monedero:\\n\\n' +\n      '‚Ä¢ <a href=\"https://t.me/wallet\">@wallet</a> ‚Äî monedero oficial de TON en Telegram\\n' +\n      '‚Ä¢ <a href=\"https://tonkeeper.com\">Tonkeeper</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://tonhub.com\">Tonhub</a> ‚Äî iOS / Android\\n' +\n      '‚Ä¢ <a href=\"https://t.me/tonkeeper\">@tonkeeper</a> ‚Äî monedero dentro de Telegram\\n\\n' +\n      '2Ô∏è‚É£ Copia la direcci√≥n de tu monedero (se ve as√≠):\\n' +\n      '<code>EQCwz3GkW9hkGkB3Dxvkdsi8IzUxxxxxxxxxxxxxxxxxxxxxxx</code>\\n\\n' +\n      '3Ô∏è‚É£ Env√≠a esta direcci√≥n aqu√≠ en el chat üì©\\n\\n' +\n      '‚úÖ Una direcci√≥n v√°lida se guardar√° autom√°ticamente\\n' +\n      '‚ùóÔ∏è Si algo va mal, el bot te indicar√° qu√© hacer',\n\n    // üîπ Format_Wallet_Info\n    wallet_info_empty: 'üòê Todav√≠a no tienes un monedero TON guardado.',\n    wallet_info_saved: 'üëõ Tu monedero TON:\\n<code>{{wallet}}</code>',\n    wallet_info_earnings: 'üí∏ Acumulado: <b>{{amount}}</b> TON',\n    wallet_buy_stars_hint: '‚≠ê ¬øQuieres m√°s Stars? C√≥mpralas directamente en Telegram.',\n    btn_buy_stars: '‚≠ê Comprar Stars',\n\n    welcome:\n      'üëã ¬°Hola! Soy HubAggregatorBot ‚Äî tu gu√≠a de bots de Telegram que te dan Stars por tu actividad ‚≠ê\\n\\n' +\n      'üéØ Aqu√≠ puedes:\\n' +\n      '‚Ä¢ lanzar bots verificados y ganar Stars por tus acciones\\n' +\n      '‚Ä¢ invitar a tus amigos y desbloquear nuevas oportunidades\\n' +\n      '‚Ä¢ seguir tu progreso y subir de nivel\\n\\n' +\n      'üí∏ Las Stars son el camino a nuevas funciones, niveles e incluso bonos en TON üòé\\n' +\n      'Cuantas m√°s acciones hagas, m√°s cosas se desbloquean\\n\\n' +\n      'üöÄ No lo retrases ‚Äî toca /partners y empieza a ganar Stars ahora mismo.',\n    unlock_top_paid: 'üí´ Desbloquear TOP por {{buy_top_price}}‚≠ê',\n    top_unlocked:\n      'üí´ Acceso a TOP desbloqueado.\\n\\nHas desbloqueado TOP con √©xito. Toca /top para ver los bots m√°s rentables.',\n    buy_top_title: 'Desbloquear acceso TOP',\n    buy_top_description: 'üí´ Acceso inmediato a la secci√≥n TOP',\n    buy_top_label: 'Acceso TOP',\n    buy_top_price: 1,\n    no_wallet_referral:\n      '‚ö†Ô∏è <b>Todav√≠a no has a√±adido un monedero TON.</b>\\n\\n' +\n      'Pero ya puedes compartir tu enlace personal üëá\\n[[referralLink]]\\n\\n' +\n      'A√±ade tu monedero con <b>/wallet</b> para recibir recompensas por tus amigos üí∞',\n    share_referral:\n      'üöÄ √önete a HubAggregatorBot ‚Äî ¬°gana Stars por tu actividad!\\nAqu√≠ tienes tu enlace de referido:\\n[[referralLink]]',\n    share_button: 'üß° Compartir enlace',\n\n    // üî• Earnings Center (ES)\n    earnings_title: 'üî• Earnings Center\\ntu progreso, TOP y 7 % de ingresos',\n    earnings_no_income: 'üòê A√∫n no tienes ingresos‚Ä¶',\n    earnings_has_income: 'üëõ Monedero: {{wallet}}\\nüåü Ganado: {{earned}} TON',\n\n    earnings_block1_title: '‚≠ê 1) Abre TOP ‚Äî x3‚Äìx7 m√°s Stars',\n    earnings_block1_line1: 'TOP desbloquea las mini apps m√°s rentables:',\n    earnings_block1_benefit1: '‚Ä¢ m√°s recompensas',\n    earnings_block1_benefit2: '‚Ä¢ progreso m√°s r√°pido',\n    earnings_block1_benefit3: '‚Ä¢ pagos m√°s altos',\n\n    earnings_block2_title: 'üí∏ 2) Tus 7 % de Telegram ‚Äî programa de afiliados oficial',\n    earnings_block2_how_it_works:\n      'Cuando la gente entra con tu enlace, inicia HubAggregatorBot y compra ‚≠ê, Telegram comparte contigo ~7 % de los ingresos.',\n    earnings_block2_examples:\n      'üìå Cu√°nto puede aportar un usuario:\\n' +\n      '‚Ä¢ 1 usuario ‚Üí ~0,35‚Äì0,70‚Ç¨\\n' +\n      '‚Ä¢ 10 usuarios ‚Üí ~3,5‚Äì7‚Ç¨\\n' +\n      '‚Ä¢ 100 usuarios ‚Üí ~35‚Äì70‚Ç¨',\n\n    earnings_enable_7_title: 'C√≥mo activar el 7 % (una vez y para siempre):',\n    earnings_enable_7_steps:\n      '1Ô∏è‚É£ Abre @HubAggregatorBot\\n' +\n      '2Ô∏è‚É£ ¬´Programa de afiliados¬ª\\n' +\n      '3Ô∏è‚É£ ¬´Unirse¬ª\\n' +\n      '‚Üí El 7 % quedar√° activo para siempre',\n\n    // üîπ NUEVO: instrucci√≥n detallada\n    earnings_7_instructions:\n      'üí∏ C√≥mo activar el 7 % (una vez y para siempre):\\n\\n' +\n      '1Ô∏è‚É£ Abre el perfil del bot @HubAggregatorBot (toca el nombre del bot arriba en el chat)\\n' +\n      '2Ô∏è‚É£ Toca ¬´Programa de afiliados¬ª\\n' +\n      '3Ô∏è‚É£ Toca ¬´Unirse¬ª\\n\\n' +\n      'Despu√©s de eso:\\n' +\n      '‚úîÔ∏è El 7 % queda activo para siempre\\n' +\n      '‚úîÔ∏è Telegram te mostrar√° tu enlace de referido personal\\n' +\n      '‚úîÔ∏è C√≥pialo y env√≠alo a tus amigos ‚Äî ganar√°s un 7 % de sus compras de Stars',\n\n    earnings_block3_title: 'üöÄ 3) Qu√© hacer ahora mismo',\n    earnings_step1_locked: '1Ô∏è‚É£ Invita a {{needed}} amigo(s) m√°s ‚Üí TOP se abrir√°',\n    earnings_step1_open: '1Ô∏è‚É£ TOP ya est√° abierto ‚Äî lanza los socios TOP',\n    earnings_step2: '2Ô∏è‚É£ Activa tu 7 %',\n    earnings_step3:\n      '3Ô∏è‚É£ Comparte este enlace en 1‚Äì2 chats activos o con un amigo al que pueda interesarle ‚Äî cada usuario puede generarte ‚Ç¨ autom√°ticamente',\n    earnings_step4: '4Ô∏è‚É£ Lanza los socios TOP',\n    earnings_auto_stats: '‚Üí los ingresos y las estad√≠sticas aparecer√°n autom√°ticamente',\n\n    earnings_btn_unlock_top: 'üíé Desbloquear TOP por {{buy_top_price}}‚≠ê',\n    earnings_btn_top_partners: '‚≠ê Socios TOP',\n    earnings_btn_activate_7: 'üí∞ Activar 7 %',\n    // üîΩ Botones para /partners\n    partners_btn_top_partners: '‚≠ê Socios TOP',\n    partners_btn_earnings: 'üí∏ Ganancias',\n  },\n};\n\nconst FALLBACK_LANG = 'uk';\n\n/**\n * –ù–æ—Ä–º–∞–ª—å–Ω–∏–π –¥–µ—Ç–µ–∫—Ç–æ—Ä –º–æ–≤–∏:\n * 1) Trigger.from.language_code (uk, en, ru-RU, es-ES‚Ä¶)\n * 2) d.userLang / d.Language (—è–∫—â–æ –∑–∞–¥–∞—î—à –≤—Ä—É—á–Ω—É –∑ —ñ–Ω—à–æ—ó –Ω–æ–¥–∏)\n * 3) fallback ‚Üí 'uk'\n */\nfunction getLang(d) {\n  let raw = '';\n\n  // 1) Telegram Trigger\n  try {\n    const trig = $('Trigger').first().json || {};\n    const from =\n      trig.callback_query?.from ||\n      trig.message?.from ||\n      trig.pre_checkout_query?.from ||\n      trig.successful_payment?.from ||\n      trig.from ||\n      {};\n    raw = from.language_code || '';\n  } catch (e) {\n    raw = '';\n  }\n\n  // 2) –†—É—á–Ω—ñ/–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ñ –æ–≤–µ—Ä—Ä–∞–π–¥–∏ –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ item\n  raw = d.userLang || d.UserLang || d.language || d.Language || raw || '';\n\n  // 3) –ù–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ 2-–ª—ñ—Ç–µ—Ä–Ω–æ–≥–æ –∫–æ–¥—É\n  const code2 = String(raw).toLowerCase().split('-')[0];\n\n  const map = {\n    ua: 'uk',\n    uk: 'uk',\n    ru: 'ru',\n    en: 'en',\n    de: 'de',\n    es: 'es',\n  };\n\n  return map[code2] || FALLBACK_LANG;\n}\n\n/**\n * t(lang, key, vars)\n * - —à—É–∫–∞—î –∫–ª—é—á —É –æ–±—Ä–∞–Ω—ñ–π –º–æ–≤—ñ\n * - —è–∫—â–æ –Ω–µ–º–∞ ‚Üí en ‚Üí fallback\n * - –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î {{placeholders}}\n */\nfunction t(lang, key, vars = {}) {\n  const locale =\n    locales[lang] ||\n    locales.en ||\n    locales[FALLBACK_LANG] ||\n    {};\n\n  const s =\n    (locale && locale[key]) ||\n    (locales.en && locales.en[key]) ||\n    (locales[FALLBACK_LANG] && locales[FALLBACK_LANG][key]) ||\n    key;\n\n  const mergedVars = {\n    buy_top_price: locale.buy_top_price ?? 1,\n    ...vars,\n  };\n\n  return Object.keys(mergedVars).reduce((acc, k) => {\n    return acc.replace(new RegExp(`{{${k}}}`, 'g'), String(mergedVars[k]));\n  }, String(s));\n}\n\n// üü¢ –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –Ω–æ–¥–∏\nreturn items.map(item => {\n  const d = item.json || {};\n  const lang = getLang(d);\n\n  // msgKey/msgVars ‚Üí —è–∫–∏–π —Å–∞–º–µ —Ç–µ–∫—Å—Ç –±—Ä–∞—Ç–∏ —è–∫ .text\n  let key = d.msgKey || d._msgKey || null;\n  const vars = d.msgVars || {};\n\n  // —è–∫—â–æ key –Ω–µ –∑–∞–¥–∞–Ω–∏–π, –∞–ª–µ —Ç–µ–∫—Å—Ç = /info ‚Äî –º–∞–ø–∏–º–æ\n  if (!key) {\n    const mt = d.messageText || d._originalText || '';\n    if (mt === '/info') key = 'info_main';\n  }\n\n  // –Ω–æ—Ä–º–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É (/info ‚Üí info_main)\n  if (key === '/info' || key === 'info') key = 'info_main';\n\n  // —è–∫—â–æ –≤—Å–µ —â–µ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑—ñ —Å–ª–µ—à–∞ ‚Üí –∑—Ä—ñ–∑–∞—î–º–æ\n  if (key && typeof key === 'string' && key.startsWith('/')) {\n    key = key.slice(1);\n  }\n\n  // –ë–µ—Ä–µ–º–æ –Ω–∞–±—ñ—Ä –∫–ª—é—á—ñ–≤ –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó —è–∫ –±–∞–∑–∏ (–≤—Å—ñ –æ–¥–Ω–∞–∫–æ–≤—ñ)\n  const baseKeys = Object.keys(locales.uk || {});\n  const translations = {};\n\n  baseKeys.forEach(k => {\n    translations[k] = t(lang, k, vars);\n  });\n\n  const originalText = d.messageText || d._originalText || '';\n\n  const out = {\n    ...d,\n    detectedLang: lang,\n    ...translations,\n    translations,\n    _originalText: originalText,\n  };\n\n  out.text = key\n    ? translations[key] || originalText || ''\n    : originalText || '';\n\n  return { json: out };\n});\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5856,
        -1504
      ],
      "id": "e0b08113-2dbc-434a-9eb1-2c486db9ba33",
      "name": "Translator"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "37386de9-e479-4772-be10-1924167f03c2",
              "leftValue": "={{ $json.topStatus || '' }}",
              "rightValue": "open",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2240,
        -2016
      ],
      "id": "366e5e4e-9486-4443-a428-4b1deaa19612",
      "name": "IF ‚Äî TOP Locked?"
    },
    {
      "parameters": {
        "chatId": "={{ \n  $('Trigger').first().json.message?.from?.id\n  || $('Trigger').first().json.callback_query?.from?.id\n  || $('Trigger').first().json.callback_query?.message?.chat?.id\n}}",
        "text": "={{ $json.message }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $json.shareLabel || 'üß° –ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å HubAggregator' }}",
                    "additionalFields": {
                      "url": "={{ $json.shareUrl || '' }}"
                    }
                  },
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.unlock_top_paid }}",
                    "additionalFields": {
                      "callback_data": "/buy_top"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "HTML"
        }
      },
      "id": "36e93a64-809e-4d24-8ff1-c652568cd5b3",
      "name": "top locked",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -1984,
        -2000
      ],
      "webhookId": "b1dfb074-d3aa-4aca-b419-cbd851b79b74",
      "typeVersion": 1.2,
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.telegram.org/bot7670421730:AAElfoI0ScKhrGgXjC9YJ7Bw400vdg0jmXM/sendInvoice",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "={{ $node[\"Trigger\"].json.callback_query.from.id }}\n"
            },
            {
              "name": "title",
              "value": "={{ $node[\"Translator\"].json.translations.buy_top_title }}"
            },
            {
              "name": "description",
              "value": "={{ $node[\"Translator\"].json.translations.buy_top_description }}"
            },
            {
              "name": "payload",
              "value": "buy_top"
            },
            {
              "name": "currency",
              "value": "XTR"
            },
            {
              "name": "prices",
              "value": "={{ JSON.stringify([\n  {\n    label: $node[\"Translator\"].json.translations.buy_top_label,\n    amount: Number($node[\"Translator\"].json.translations.buy_top_price || 1)\n  }\n]) }}\n"
            },
            {
              "name": "start_parameter",
              "value": "buy_top"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -4112,
        -1680
      ],
      "id": "bea3808d-1aca-434f-a09b-fe09bd646c6b",
      "name": "buy_top"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json[\"Message Text\"] || $json.data || \"\" }}",
                    "rightValue": "buy_top",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    },
                    "id": "5dc13385-d401-4f06-8691-cbb22a0e8b16"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "buy_top"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "8ee08fb9-7b9c-4826-a41f-aacb6f9c7f77",
                    "leftValue": "={{ $json[\"Message Text\"] || $json.data || \"\" }}\n",
                    "rightValue": "/top",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "top"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2301764e-a453-4fa4-aff4-f0e487378656",
                    "leftValue": "=={{ $json[\"Message Text\"] || $json.data || '' }}\n",
                    "rightValue": "share_from_.*",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "share"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "d769ebb1-7916-40f9-934d-b77a2af1fa7f",
                    "leftValue": "=={{ $json[\"Message Text\"] || $json.data || '' }}\n",
                    "rightValue": "/earnings",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "earnings"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "725c7485-6054-4813-97ff-8d4e9981ba07",
                    "leftValue": "=={{ $json[\"Message Text\"] || $json.data || '' }}\n",
                    "rightValue": "activate_7",
                    "operator": {
                      "type": "string",
                      "operation": "regex"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "activate_7"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -4288,
        -1392
      ],
      "id": "f31ad71e-cde6-4fd4-8ba1-3af2d26228b8",
      "name": "Switch_CallbackAction"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $('Trigger').item.json.hasOwnProperty('pre_checkout_query') }}",
                    "rightValue": "true",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "5dc13385-d401-4f06-8691-cbb22a0e8b16"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "pre_checkout"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "loose",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "10be622b-83e7-4553-8a45-a4da115e02c0",
                    "leftValue": "={{ $('Trigger').item.json.message && $('Trigger').item.json.message.hasOwnProperty('successful_payment') }}",
                    "rightValue": "true",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "PaymentSuccess"
            }
          ]
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        -4480,
        -896
      ],
      "id": "031a44fc-b51b-40d2-b352-2b1cbd429c4d",
      "name": "Switch_PaymentType"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.telegram.org/bot7670421730:AAElfoI0ScKhrGgXjC9YJ7Bw400vdg0jmXM/answerPreCheckoutQuery",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "pre_checkout_query_id",
              "value": "={{ $('Trigger').item.json.pre_checkout_query.id }}"
            },
            {
              "name": "ok",
              "value": "={{ true }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -4192,
        -752
      ],
      "id": "a7475fbd-5f41-4751-9c5b-73b112b73008",
      "name": "answer_pre_checkout"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "User Chat ID": "={{ \n  $('Trigger').item.json.message?.chat?.id ||\n  $('Trigger').item.json.callback_query?.from?.id ||\n  $('Trigger').item.json.pre_checkout_query?.from?.id ||\n  '' \n}}",
            "Username": "={{ \n  $('Trigger').item.json.message?.from?.username ||\n  $('Trigger').item.json.callback_query?.from?.username ||\n  $('Trigger').item.json.pre_checkout_query?.from?.username ||\n  '' \n}}",
            "Language": "={{ \n  $('Trigger').item.json.message?.from?.language_code ||\n  $('Trigger').item.json.callback_query?.from?.language_code ||\n  $('Trigger').item.json.pre_checkout_query?.from?.language_code ||\n  '' \n}}",
            "Status": "active",
            "TOP Status": "open",
            "Last Updated": "={{ $now.toFormat(\"yyyy-MM-dd HH:mm:ss\") }}"
          },
          "matchingColumns": [
            "User Chat ID"
          ],
          "schema": [
            {
              "id": "User Chat ID",
              "displayName": "User Chat ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Username",
              "displayName": "Username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Wallet Address",
              "displayName": "Wallet Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Total Earned TON",
              "displayName": "Total Earned TON",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Comment",
              "displayName": "Comment",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Level",
              "displayName": "Level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Total Invited",
              "displayName": "Total Invited",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Bonus Date",
              "displayName": "Last Bonus Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Referred By",
              "displayName": "Referred By",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "First Join Date",
              "displayName": "First Join Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Language",
              "displayName": "Language",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Geo",
              "displayName": "Geo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "TOP Status",
              "displayName": "TOP Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -3936,
        -752
      ],
      "id": "f2f3f493-8ba2-4377-aa1b-bcad510315b0",
      "name": "Upsert_TOP_user",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.telegram.org/bot7670421730:AAElfoI0ScKhrGgXjC9YJ7Bw400vdg0jmXM/sendMessage",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "chat_id",
              "value": "={{ \n  $node[\"Trigger\"].json.message?.chat?.id ||\n  $node[\"Trigger\"].json.callback_query?.from?.id ||\n  $node[\"Trigger\"].json.pre_checkout_query?.from?.id ||\n  $node[\"Trigger\"].json.successful_payment?.from?.id\n}}\n"
            },
            {
              "name": "text",
              "value": "={{ $node[\"Translator\"].json.translations.top_unlocked }}"
            },
            {
              "name": "parse_mode",
              "value": "HTML"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -3728,
        -752
      ],
      "id": "e58ec4ef-0011-4f54-9df2-df0ac76d64c9",
      "name": "send_top_unlocked"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE",
          "mode": "list",
          "cachedResultName": "Earnbot_Referrals",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1348161464,
          "mode": "list",
          "cachedResultName": "user_wallets",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1YBFFKaUf8Hy46gTnIDfVohaw_GNv2D4mskLqaK6B2AE/edit#gid=1348161464"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "User Chat ID": "={{ \n  $('Trigger').item.json.message?.chat?.id ||\n  $('Trigger').item.json.callback_query?.from?.id ||\n  $('Trigger').item.json.pre_checkout_query?.from?.id ||\n  '' \n}}",
            "Username": "={{ \n  $('Trigger').item.json.message?.from?.username ||\n  $('Trigger').item.json.callback_query?.from?.username ||\n  $('Trigger').item.json.pre_checkout_query?.from?.username ||\n  '' \n}}",
            "Language": "={{ \n  $('Trigger').item.json.message?.from?.language_code ||\n  $('Trigger').item.json.callback_query?.from?.language_code ||\n  $('Trigger').item.json.pre_checkout_query?.from?.language_code ||\n  '' \n}}",
            "Status": "active",
            "TOP Status": "locked",
            "Last Updated": "={{ $now.toFormat(\"yyyy-MM-dd HH:mm:ss\") }}"
          },
          "matchingColumns": [
            "User Chat ID"
          ],
          "schema": [
            {
              "id": "User Chat ID",
              "displayName": "User Chat ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Username",
              "displayName": "Username",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Wallet Address",
              "displayName": "Wallet Address",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Updated",
              "displayName": "Last Updated",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Total Earned TON",
              "displayName": "Total Earned TON",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Comment",
              "displayName": "Comment",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Level",
              "displayName": "Level",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Total Invited",
              "displayName": "Total Invited",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Last Bonus Date",
              "displayName": "Last Bonus Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Referred By",
              "displayName": "Referred By",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "First Join Date",
              "displayName": "First Join Date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Language",
              "displayName": "Language",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Device",
              "displayName": "Device",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Geo",
              "displayName": "Geo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "TOP Status",
              "displayName": "TOP Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        -2128,
        -1648
      ],
      "id": "4230d223-5fa9-4109-883f-0f364964ee56",
      "name": "Upsert_TOP_user1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "Qcg4BHsvBsEDeP1q",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "chatId": "={{\n  (() => {\n    const trig = $node[\"Trigger\"].json || {};\n\n    const from =\n      (trig.callback_query && trig.callback_query.from) ||\n      (trig.message && trig.message.from) ||\n      trig.from ||\n      {};\n\n    return (\n      from.id ||\n      $json[\"User Chat ID\"] ||\n      $json[\"User ID\"] ||\n      0\n    );\n  })()\n}}\n",
        "text": "={{ $node[\"Translator\"].json.translations.earnings_7_instructions }}",
        "replyMarkup": "inlineKeyboard",
        "inlineKeyboard": {
          "rows": [
            {
              "row": {
                "buttons": [
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.earnings_btn_unlock_top }}",
                    "additionalFields": {
                      "callback_data": "buy_top"
                    }
                  },
                  {
                    "text": "={{ $node[\"Translator\"].json.translations.earnings_btn_top_partners }}",
                    "additionalFields": {
                      "callback_data": "=/top"
                    }
                  }
                ]
              }
            }
          ]
        },
        "additionalFields": {
          "parse_mode": "HTML"
        }
      },
      "id": "973632f2-a7ec-4c7b-a78e-76f3295b544f",
      "name": "Send_7Percent_Instructions",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        -3792,
        -1200
      ],
      "webhookId": "6037fce6-d20b-4807-85b3-89bac7d7d879",
      "credentials": {
        "telegramApi": {
          "id": "9K2fMmccHbWjB9A0",
          "name": "Telegram account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [
        -6656,
        -1264
      ],
      "id": "935f637d-69f7-4f0a-af14-41b349e8923d",
      "name": "for mcp",
      "webhookId": "c99a2b6e-cf97-4d18-a1ac-59e05714bc78"
    }
  ],
  "pinData": {},
  "connections": {
    "Global data": {
      "main": [
        [
          {
            "node": "Extract message data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Command?": {
      "main": [
        [
          {
            "node": "Switch_Commands",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Command?",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch_CallbackAction",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Switch_PaymentType",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch_Commands": {
      "main": [
        [
          {
            "node": "read_user_wallet",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "read_user_wallet_for_top",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "/partners",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract_User_Info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract_Share_Referral_Info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "/top": {
      "main": [
        [
          {
            "node": "Format_TopBots_Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format_TopBots_Message": {
      "main": [
        [
          {
            "node": "IF ‚Äî TOP Locked?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "/partners": {
      "main": [
        [
          {
            "node": "format_partners_list",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "format_partners_list": {
      "main": [
        [
          {
            "node": "partners",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "read_user_wallet": {
      "main": [
        [
          {
            "node": "Switch_wallet_check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch_wallet_check": {
      "main": [
        [
          {
            "node": "format_wallet_info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "wallet_not_found",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "format_wallet_info": {
      "main": [
        [
          {
            "node": "wallet_info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "wallet_not_found": {
      "main": [
        [
          {
            "node": "wallet_not_found1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "is_valid_wallet_format": {
      "main": [
        [
          {
            "node": "create_wallet_entry",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "is_valid_wallet_format1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create_wallet_entry": {
      "main": [
        [
          {
            "node": "create_wallet_entry1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "is_valid_wallet_format",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract_User_Info": {
      "main": [
        [
          {
            "node": "Check_If_User_Exists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check_If_User_Exists": {
      "main": [
        [
          {
            "node": "Filter_User_By_ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter_User_By_ID": {
      "main": [
        [
          {
            "node": "Send_Referral",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Upsert_TOP_user1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract_Share_Referral_Info": {
      "main": [
        [
          {
            "node": "Read_Wallets_Sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read_Wallets_Sheet": {
      "main": [
        [
          {
            "node": "Build_Earnings_Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build_Earnings_Message": {
      "main": [
        [
          {
            "node": "Send_Earnings_Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract message data": {
      "main": [
        [
          {
            "node": "Translator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format_Log_Entry": {
      "main": [
        [
          {
            "node": "Check: Is Referral",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log to bot_log": {
      "main": [
        [
          {
            "node": "IF (isReferral = true)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Total Invited": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check: Is Referral": {
      "main": [
        [
          {
            "node": "Log to bot_log",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Count Referrals": {
      "main": [
        [
          {
            "node": "Update Total Invited",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF (isReferral = true)": {
      "main": [
        [
          {
            "node": "Get bot_log",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger": {
      "main": [
        [
          {
            "node": "Global data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get bot_log": {
      "main": [
        [
          {
            "node": "Count Referrals",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "read_user_wallet_for_top": {
      "main": [
        [
          {
            "node": "/top",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Translator": {
      "main": [
        [
          {
            "node": "Format_Log_Entry",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF ‚Äî TOP Locked?": {
      "main": [
        [
          {
            "node": "top",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "top locked",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch_CallbackAction": {
      "main": [
        [
          {
            "node": "buy_top",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "read_user_wallet_for_top",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract_User_Info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Extract_Share_Referral_Info",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send_7Percent_Instructions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch_PaymentType": {
      "main": [
        [
          {
            "node": "answer_pre_checkout",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "answer_pre_checkout": {
      "main": [
        [
          {
            "node": "Upsert_TOP_user",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upsert_TOP_user": {
      "main": [
        [
          {
            "node": "send_top_unlocked",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upsert_TOP_user1": {
      "main": [
        [
          {
            "node": "Send_Referral",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "for mcp": {
      "main": [
        [
          {
            "node": "Global data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timeSavedMode": "fixed",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": true
  },
  "versionId": "73a7e4b2-ddc0-4ac0-80b3-cd8839e0d06d",
  "meta": {
    "instanceId": "931b26cb279e80caa2e7d4b2ae2787a3a6b381807217e6d84502fea7728dc188"
  },
  "id": "ZgMEqr0NUyRo1ZoZ",
  "tags": []
}