# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Referral Tracking

## –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞—Ü—é—î referral tracking:

1. **–°—Ç–≤–æ—Ä–∏—Ç–∏ referral link:**
   ```bash
   curl -k -X POST "https://api-production-57e8.up.railway.app/api/v1/admin/bots/4f3c45a5-39ac-4d6e-a0eb-263765d70b1a/test-command?command=/share&user_lang=uk"
   ```

2. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ª—ñ–Ω–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞:**
   - –ú–∞—î –º—ñ—Å—Ç–∏—Ç–∏ `HubAggregatorBot` (–Ω–µ EarnHubAggregatorBot)
   - –ú–∞—î –º—ñ—Å—Ç–∏—Ç–∏ `?start=_tgr_XXX`

3. **–ö–ª—ñ–∫–Ω—É—Ç–∏ –Ω–∞ –ª—ñ–Ω–∫—É –≤ Telegram:**
   - –í—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –±–æ—Ç
   - –ë–æ—Ç –º–∞—î –æ—Ç—Ä–∏–º–∞—Ç–∏ `/start _tgr_XXX`

4. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –∑–∞–ª–æ–≥–æ–≤–∞–Ω–æ:**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `business_data` –∑ `data_type='log'`
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ `total_invited` –æ–Ω–æ–≤–∏–≤—Å—è –¥–ª—è inviter

## –©–æ –≤—ñ–¥—Å—Ç–µ–∂—É—î—Ç—å—Å—è:

- ‚úÖ –ö–ª—ñ–∫ –Ω–∞ referral link ‚Üí –ª–æ–≥—É—î—Ç—å—Å—è –≤ `business_data` (log)
- ‚úÖ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è inviter ‚Üí –ø–æ `inviter_external_id`
- ‚úÖ –û–Ω–æ–≤–ª–µ–Ω–Ω—è `total_invited` ‚Üí –¥–ª—è inviter –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö referrals ‚Üí –ø–æ `ref_parameter`

## –ü—Ä–æ–±–ª–µ–º–∏ —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏:

1. **–õ—ñ–Ω–∫–∞ –≤–µ–¥–µ –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –±–æ—Ç–∞** ‚Üí webhook –Ω–µ –ø—Ä–∏–π–¥–µ
2. **Start parameter –Ω–µ –≤–∏—Ç—è–≥—É—î—Ç—å—Å—è** ‚Üí –Ω–µ –∑–∞–ª–æ–≥–æ–≤–∞–Ω–æ
3. **Referral –Ω–µ —Ä–æ–∑–ø—ñ–∑–Ω–∞—î—Ç—å—Å—è** ‚Üí `is_referral=false`
4. **Inviter –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ** ‚Üí `total_invited` –Ω–µ –æ–Ω–æ–≤–∏—Ç—å—Å—è

